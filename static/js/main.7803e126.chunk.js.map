{"version":3,"sources":["utils/txNotifier.ts","constants/contracts.js","constants/tokens.js","utils/web3.js","utils/storage.ts","utils/infura.js","utils/number.ts","utils/pool.ts","components/NavBar/TotalBalance.tsx","components/common/BoxStyle.tsx","components/NavBar/ConnectButton.tsx","components/NavBar/index.tsx","components/common/EpochBlock.tsx","constants/values.js","components/HomePage/index.tsx","components/common/AddressBlock.tsx","components/common/BalanceBlock.tsx","components/common/MaxButton.tsx","components/common/PriceSection.tsx","components/common/Wrapper.tsx","components/common/CheckBox.tsx","components/Trade/Header.tsx","components/common/IconHeader.tsx","components/Trade/index.tsx","components/Footer/index.tsx","components/common/TextBlock.tsx","components/Wallet/Header.tsx","components/common/BigNumberInput.tsx","components/Wallet/WithdrawDeposit.tsx","components/Wallet/BondUnbond.tsx","components/Wallet/index.tsx","components/common/NumberBlock.tsx","components/EpochDetail/AdvanceEpoch.tsx","components/EpochDetail/Header.tsx","components/EpochDetail/index.tsx","components/CouponMarket/Header.tsx","components/CouponMarket/PurchaseCoupons.tsx","components/CouponMarket/PurchaseHistory.tsx","components/CouponMarket/ModalWarning.tsx","components/common/Header.tsx","components/CouponMarket/index.tsx","components/Governance/Header.tsx","utils/gov.ts","components/Governance/ProposeCandidate.tsx","components/Governance/CandidateHistory.tsx","components/Governance/index.tsx","components/Candidate/Vote.tsx","components/Candidate/VoteHeader.tsx","components/Candidate/CommitHeader.tsx","components/Candidate/Commit.tsx","components/Candidate/index.tsx","components/Regulation/Header.tsx","components/Regulation/RegulationHistory.tsx","components/Regulation/index.tsx","components/Pool/WithdrawDeposit.tsx","components/Pool/BondUnbond.tsx","components/Pool/Header.tsx","components/Pool/Claim.tsx","components/Pool/Provide.tsx","components/Pool/Migrate.tsx","components/Pool/index.tsx","components/HomePageNoWeb3/index.tsx","App.tsx","serviceWorker.js","index.tsx"],"names":["notify","v","console","log","DollarPool2","DollarPool3","DollarPool4","UNI","USDC","addr","decimals","symbol","BSD","BSDS","testnetUSDCAbi","require","daoAbi","poolAbi","UINT256_MAX","updateModalMode","theme","a","window","darkMode","connect","web3","Web3","ethereum","eth","getAccounts","addresses","length","enable","toLowerCase","checkConnectedAndGetAddress","approve","tokenAddr","spender","amt","account","oToken","Contract","methods","send","from","on","hash","advance","dao","daoContract","deposit","amount","BigNumber","toFixed","withdraw","bond","unbondUnderlying","purchaseCoupons","redeemCoupons","epoch","recordVote","candidate","voteType","vote","commit","depositPool","pool","callback","poolContract","withdrawPool","bondPool","unbondPool","unbond","claimPool","claim","providePool","provide","getPreference","key","defaultValue","localStorage","getItem","storePreference","value","setItem","dollarAbi","undefined","getTokenBalance","token","tokenContract","balanceOf","call","getTokenTotalSupply","totalSupply","getTokenAllowance","allowance","getBalanceBonded","balanceOfBonded","getBalanceOfStaged","balanceOfStaged","getStatusOf","statusOf","getFluidUntil","fluidUntil","getLockedUntil","lockedUntil","getEpoch","getEpochTime","epochTime","getTotalDebt","totalDebt","getTotalRedeemable","totalRedeemable","getTotalCoupons","totalCoupons","getTotalBonded","totalBonded","getTotalStaged","totalStaged","getTotalBondedAt","totalBondedAt","getApproveFor","approveFor","getRejectFor","rejectFor","getStartFor","startFor","getPeriodFor","periodFor","getIsInitialized","isInitialized","getRecordedVote","recordedVote","getBalanceOfCoupons","balanceOfCoupons","getBatchBalanceOfCoupons","epochs","calls","map","Promise","all","getCouponsExpiration","couponsExpiration","getBatchCouponsExpiration","getCouponPremium","couponPremium","getImplementation","implementation","getPool","getCouponEpochs","getPastEvents","filter","fromBlock","events","couponEpochs","reduce","event","returnValues","couponAmount","prev","get","set","coupons","plus","Map","values","sort","b","getAllProposals","payload","prop","blockNumber","getAllRegulations","increaseP","decreaseP","neutralP","increase","decrease","neutral","e","type","data","concat","getPoolStatusOf","getPoolBalanceOfBonded","getPoolBalanceOfStaged","getPoolBalanceOfRewarded","balanceOfRewarded","getPoolBalanceOfClaimable","balanceOfClaimable","getPoolTotalBonded","getPoolTotalRewarded","totalRewarded","getPoolTotalClaimable","totalClaimable","toBaseUnitBN","rawAmt","raw","base","decimalsBN","times","pow","integerValue","toTokenUnitsBN","tokenAmount","tokenDecimals","digits","div","isPos","isZero","isPositive","ownership","balance","multipliedBy","dividedBy","formatBN","position","isLessThan","bnStr","includes","parts","split","i","pad","precision","ROUND_FLOOR","toString","replace","delineate","formatMoney","n","toPrecision","Math","abs","Number","getPoolAddress","getLegacyPoolAddress","poolAddress","TotalBalance","user","useState","totalBalance","setTotalBalance","useEffect","isCancelled","updateUserInfo","id","setInterval","clearInterval","esdBalance","stagedBalance","bondedBalance","pairBalanceBSDStr","pairTotalSupplyUNIStr","userUNIBalanceStr","userPoolBondedBalanceStr","userPoolStagedBalanceStr","userPoolRewardedBalanceStr","userPoolClaimableBalanceStr","userBalance","userStagedBalance","userBondedBalance","userUNIBalance","userPoolBondedBalance","userPoolStagedBalance","userPoolRewardedBalance","userPoolClaimableBalance","UNItoBSD","daoTotalBalance","poolTotalBalance","circulationBalance","style","fontSize","padding","fontWeight","lineHeight","fontFamily","BoxStyle","ButtonComponent","styled","Button","ConnectButton","hasWeb3","setUser","isConnected","setIsConnected","connectWeb3","address","disconnectWeb3","display","flex","alignItems","onClick","marginRight","height","textAlign","entity","icon","color","label","disabled","LinkComponent","LinkButton","title","isSelected","paddingTop","NavBar","history","useHistory","currentTheme","useTheme","updateIsHome","page","setPage","home","location","pathname","listen","_name","borderTop","border","backgroundColor","width","maxWidth","marginLeft","push","EpochBlock","epochCurrent","setEpochCurrent","setEpochTime","fetch","fetchedEpoch","fetchedEpochTime","fetchInterval","handleAdvance","useCallback","wide","eq","lte","MAX_UINT256","minus","GOVERNANCE_QUORUM","GOVERNANCE_PROPOSAL_THRESHOLD","BoxComponent","Box","epochformatted","epochRemainder","floor","Date","now","epochHour","epochMinute","MainButton","description","tag","opacity","HomePage","flexWrap","flexBasis","flexGrow","className","AddressBlock","shorten","BalanceBlock","asset","suffix","integer","balanceBN","gte","tokens","MaxButton","PriceSection","forceDisplay","amtBN","gt","toNumber","MyCheckBox","text","checked","onCheck","CheckBoxWrapper","onChange","margin","props","surfaceContentSecondary","Container","TradePageHeader","pairBalanceBSD","pairBalanceUSDC","uniswapPair","price","HeaderWrapper","Header","IconHeader","primary","href","UniswapPool","setPairBalanceBSD","setPairBalanceUSDC","pairBalanceUSDCStr","FooterLink","Footer","updateTheme","surface","left","bottom","marginTop","marginBottom","TextBlock","STATUS_MAP","status","accountStatus","unlocked","AccountPageHeader","accountBSDBalance","accountBSDSBalance","totalBSDSSupply","accountStagedBalance","accountBondedBalance","BigNumberInput","setter","adornment","adornmentPosition","isNegative","target","onBlur","WithdrawDeposit","depositAmount","setDepositAmount","withdrawAmount","setWithdrawAmount","heading","comparedTo","minWidth","isGreaterThan","BondUnbond","staged","bonded","lockup","bondAmount","setBondAmount","unbondAmount","setUnbondAmount","Wallet","override","useParams","userBSDBalance","setUserBSDBalance","userBSDAllowance","setUserBSDAllowance","userBSDSBalance","setUserBSDSBalance","setTotalBSDSSupply","setUserStagedBalance","setUserBondedBalance","userStatus","setUserStatus","userStatusUnlocked","setUserStatusUnlocked","setLockup","esdAllowance","BSDSBalance","BSDSSupply","fluidUntilStr","lockedUntilStr","parseInt","max","NumberBlock","num","numNum","AdvanceEpoch","EpochPageHeader","EpochDetail","setEpoch","epochStr","epochTimeStr","CouponMarketHeader","debt","supply","premium","PurchaseCoupons","purchaseAmount","setPurchaseAmount","setPremium","updatePremium","purchaseAmountBase","premiumFormatted","maxPurchaseAmount","PurchaseHistory","hideRedeemed","setEpochs","initialized","setInitialized","epochsFromEvents","epochNumbers","couponsExpirations","expiration","fields","entries","entriesPerPage","onPageChange","renderEntry","Btn","ModalWarning","storedShowWarning","showWarning","setShowWarning","visible","closeButton","UIHeader","ONE_COUPON","CouponMarket","storedHideRedeemed","setBalance","setAllowance","setSupply","setCoupons","redeemable","setRedeemable","setCouponPremium","setDebt","setHideRedeemed","balanceStr","allowanceStr","supplyStr","debtStr","couponsStr","redeemableStr","couponPremiumStr","alignSelf","CheckBox","GovernanceHeader","stake","totalStake","proposalStatus","start","period","reject","total","canPropose","plausibleCandidate","test","ProposeCandidate","setCandidate","DataComponent","formatProposals","proposals","currentTotalStake","p","initializeds","approves","rejecteds","at","supplyAts","index","CandidateHistory","setProposals","allProposals","formattedProposals","proposal","Governance","setStake","setTotalStake","setImplementation","statusStr","stakeStr","totalStakeStr","implementationStr","VOTE_TYPE_MAP","Vote","participation","dividedToIntegerBy","VoteHeader","showParticipation","CommitHeader","startEpoch","periodEpoch","Commit","s","approved","Candidate","setApproveFor","setRejectFor","setVote","setStatus","userStake","setUserStake","setStartEpoch","setPeriodEpoch","voteStr","userStakeStr","approveForStr","rejectForStr","startForStr","periodForStr","epochN","startN","periodN","endsAfter","RegulationHeader","poolLiquidity","poolRewarded","poolClaimable","legacyPoolRewarded","legacyPoolClaimable","daoTotalSupply","poolTotalSupply","legacyPoolTotalSupply","circulatingSupply","items","item","percentage","formatPrice","formatDeltaRedeemable","newRedeemable","formatDeltaDebt","lessDebt","newDebt","formatDeltaBonded","newBonded","RegulationHistory","regulations","setRegulations","allRegulations","Regulation","setTotalSupply","setTotalBonded","setTotalStaged","setTotalRedeemable","setPoolLiquidity","poolTotalRewarded","setPoolTotalRewarded","poolTotalClaimable","setPoolTotalClaimable","legacyPoolTotalRewarded","legacyPoolTotalClaimable","setTotalDebt","setTotalCoupons","totalSupplyStr","totalBondedStr","totalStagedStr","totalRedeemableStr","poolLiquidityStr","poolTotalRewardedStr","poolTotalClaimableStr","totalDebtStr","totalCouponsStr","PoolPageHeader","accountUNIBalance","accountRewardedBSDBalance","accountClaimableBSDBalance","poolTotalBonded","accountPoolStatus","Claim","claimable","claimAmount","setClaimAmount","Provide","rewarded","userUSDCBalance","userUSDCAllowance","provideAmount","setProvideAmount","usdcAmount","setUsdcAmount","USDCToBSDRatio","onChangeAmountBSD","amountBSD","amountBSDBN","amountBSDBU","newAmountUSDC","Migrate","legacyPoolAddress","isRewardNegative","unbonded","setUnbonded","withdrawn","setWithdrawn","claimed","setClaimed","Pool","setPoolAddress","setPoolTotalBonded","setUserUNIBalance","userUNIAllowance","setUserUNIAllowance","setUserUSDCBalance","setUserUSDCAllowance","userRewardedBalance","setUserRewardedBalance","userClaimableBalance","setUserClaimableBalance","legacyUserStagedBalance","setLegacyUserStagedBalance","legacyUserBondedBalance","setLegacyUserBondedBalance","legacyUserRewardedBalance","setLegacyUserRewardedBalance","legacyUserClaimableBalance","setLegacyUserClaimableBalance","legacyUserStatus","setLegacyUserStatus","poolAddressStr","poolTotalBondedStr","usdcBalance","usdcAllowance","rewardedBalance","claimableBalance","pairBSDBalance","pairUSDCBalance","isRewardedNegative","hasLegacyBalance","HomePageNoWeb3","App","storedTheme","setHasWeb3","setTheme","assetsUrl","process","layout","path","Trade","newTheme","Boolean","hostname","match","Moment","locale","momentLocalizer","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.7803e126.chunk.js","sourcesContent":["export const notify = {\r\n  hash: (v) => console.log(v)\r\n}","/* eslint-disable camelcase */\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const UniswapV2Router02 = '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D';\r\nexport const DollarPool1 = '0xE8AA528D11d89c137F79A6d1Ca7dFdDC41dcF9b0';\r\nexport const DollarPool2 = '0xE8AA528D11d89c137F79A6d1Ca7dFdDC41dcF9b0';\r\nexport const DollarPool3 = '0xE8AA528D11d89c137F79A6d1Ca7dFdDC41dcF9b0';\r\nexport const DollarPool4 = '0xE8AA528D11d89c137F79A6d1Ca7dFdDC41dcF9b0';\r\n","export const UNI = {\r\n  addr: '0x043F62e75D3e74f47a91408a8376bf00391Aa227',\r\n  decimals: 18,\r\n  symbol: 'UNI',\r\n};\r\n\r\nexport const USDC = {\r\n  addr: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',\r\n  decimals: 6,\r\n  symbol: 'USDC',\r\n};\r\n\r\nexport const BSD = {\r\n  addr: '0x0afB6a6ba319202464c75eD09F2010d883257cA9',\r\n  decimals: 18,\r\n  symbol: 'BSD',\r\n};\r\n\r\nexport const BSDS = {\r\n  addr: '0x0E182c65D2bF128DbB28fB6F2B9EdD65B0142b4C',\r\n  decimals: 18,\r\n  symbol: 'BSDS',\r\n};\r\n","/* eslint-disable camelcase */\r\nimport Web3 from 'web3';\r\nimport BigNumber from 'bignumber.js';\r\n\r\nimport { notify } from './txNotifier.ts';\r\nimport { UniswapV2Router02 } from '../constants/contracts';\r\n\r\nimport { BSD, USDC } from '../constants/tokens';\r\n\r\nconst uniswapRouterAbi = require('../constants/abi/UniswapV2Router02.json');\r\nconst testnetUSDCAbi = require('../constants/abi/TestnetUSDC.json');\r\nconst daoAbi = require('../constants/abi/Implementation.json');\r\nconst poolAbi = require('../constants/abi/Pool.json');\r\n\r\nconst DEADLINE_FROM_NOW = 60 * 15;\r\nconst UINT256_MAX = '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff';\r\n\r\n/**\r\n * Connection Utilities\r\n */\r\n\r\nexport const updateModalMode = async (theme) => {\r\n  window.darkMode = theme === 'dark';\r\n};\r\n\r\nexport const connect = async () => {\r\n  window.web3 = new Web3(window.ethereum);\r\n  let addresses = await window.web3.eth.getAccounts();\r\n  if (!addresses.length) {\r\n    try {\r\n      addresses = await window.ethereum.enable();\r\n    } catch (e) {\r\n      console.log(e);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return addresses.length ? addresses[0].toLowerCase() : null;\r\n};\r\n\r\n// eslint-disable-next-line consistent-return\r\nexport const checkConnectedAndGetAddress = async () => {\r\n  let addresses = await window.web3.eth.getAccounts();\r\n  if (!addresses.length) {\r\n    try {\r\n      addresses = await window.ethereum.enable();\r\n      // eslint-disable-next-line no-empty\r\n    } catch (e) { }\r\n  }\r\n\r\n  return addresses[0];\r\n};\r\n\r\n/**\r\n * ERC20 Utilities\r\n */\r\n\r\nexport const approve = async (tokenAddr, spender, amt = UINT256_MAX) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const oToken = new window.web3.eth.Contract(testnetUSDCAbi, tokenAddr);\r\n  await oToken.methods\r\n    .approve(spender, amt)\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const mintTestnetUSDC = async (amount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const usdc = new window.web3.eth.Contract(testnetUSDCAbi, USDC.addr);\r\n\r\n  await usdc.methods.mint(account, new BigNumber(amount).toFixed())\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\n/**\r\n * Uniswap Protocol\r\n */\r\n\r\nexport const buyBSD = async (buyAmount, maxInputAmount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\r\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\r\n\r\n  await router.methods.swapTokensForExactTokens(\r\n    buyAmount,\r\n    maxInputAmount,\r\n    [USDC.addr, BSD.addr],\r\n    account,\r\n    deadline,\r\n  )\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const sellBSD = async (sellAmount, minOutputAmount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\r\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\r\n\r\n  await router.methods.swapExactTokensForTokens(\r\n    sellAmount,\r\n    minOutputAmount,\r\n    [BSD.addr, USDC.addr],\r\n    account,\r\n    deadline,\r\n  )\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const addLiquidity = async (amountBSD, amountUSDC, slippage) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\r\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\r\n  const slippageBN = new BigNumber(slippage);\r\n  const minAmountBSD = new BigNumber(amountBSD)\r\n    .multipliedBy(new BigNumber(1).minus(slippageBN))\r\n    .integerValue(BigNumber.ROUND_FLOOR);\r\n  const minAmountUSDC = new BigNumber(amountUSDC)\r\n    .multipliedBy(new BigNumber(1).minus(slippageBN))\r\n    .integerValue(BigNumber.ROUND_FLOOR);\r\n\r\n  await router.methods.addLiquidity(\r\n    BSD.addr,\r\n    USDC.addr,\r\n    new BigNumber(amountBSD).toFixed(),\r\n    new BigNumber(amountUSDC).toFixed(),\r\n    minAmountBSD,\r\n    minAmountUSDC,\r\n    account,\r\n    deadline,\r\n  )\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const removeLiquidity = async (liquidityAmount, minAmountBSD, minAmountUSDC) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\r\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\r\n\r\n  await router.methods.removeLiquidity(\r\n    BSD.addr,\r\n    USDC.addr,\r\n    new BigNumber(liquidityAmount).toFixed(),\r\n    new BigNumber(minAmountBSD).toFixed(),\r\n    new BigNumber(minAmountUSDC).toFixed(),\r\n    account,\r\n    deadline,\r\n  )\r\n    .send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\n/**\r\n * BSD Protocol\r\n */\r\n\r\nexport const advance = async (dao) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .advance()\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const deposit = async (dao, amount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .deposit(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const withdraw = async (dao, amount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .withdraw(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const bond = async (dao, amount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .bond(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const unbond = async (dao, amount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .unbond(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const unbondUnderlying = async (dao, amount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .unbondUnderlying(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const purchaseCoupons = async (dao, amount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .purchaseCoupons(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const redeemCoupons = async (dao, epoch, amount) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .redeemCoupons(epoch, new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const recordVote = async (dao, candidate, voteType) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .vote(candidate, voteType)\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\nexport const commit = async (dao, candidate) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\r\n  await daoContract.methods\r\n    .commit(candidate)\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n    });\r\n};\r\n\r\n/* UNI-V2 Incentivization Pool */\r\nexport const depositPool = async (pool, amount, callback) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\r\n  await poolContract.methods\r\n    .deposit(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n      callback(hash);\r\n    });\r\n};\r\n\r\nexport const withdrawPool = async (pool, amount, callback) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\r\n  await poolContract.methods\r\n    .withdraw(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n      callback(hash);\r\n    });\r\n};\r\n\r\nexport const bondPool = async (pool, amount, callback) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\r\n  await poolContract.methods\r\n    .bond(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n      callback(hash);\r\n    });\r\n};\r\n\r\nexport const unbondPool = async (pool, amount, callback) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\r\n  await poolContract.methods\r\n    .unbond(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n      callback(hash);\r\n    });\r\n};\r\n\r\nexport const claimPool = async (pool, amount, callback) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\r\n  await poolContract.methods\r\n    .claim(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n      callback(hash);\r\n    });\r\n};\r\n\r\nexport const providePool = async (pool, amount, callback) => {\r\n  const account = await checkConnectedAndGetAddress();\r\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\r\n  await poolContract.methods\r\n    .provide(new BigNumber(amount).toFixed())\r\n    .send({\r\n      from: account,\r\n    })\r\n    .on('transactionHash', (hash) => {\r\n      notify.hash(hash);\r\n      callback(hash);\r\n    });\r\n};\r\n","/**\r\n * Get value by key\r\n * @param {string} key\r\n * @param {string} defaultValue\r\n */\r\nexport function getPreference(key:string, defaultValue:string): string {\r\n  return localStorage.getItem(key) || defaultValue;\r\n}\r\n\r\n/**\r\n * store value to storage\r\n * @param {string} key\r\n * @param {string} value\r\n */\r\nexport function storePreference(key:string, value:string):void {\r\n  localStorage.setItem(key, value);\r\n}\r\n","import Web3 from 'web3';\r\n\r\nimport BigNumber from 'bignumber.js';\r\nimport { UniswapV2Router02 } from '../constants/contracts';\r\nimport { BSD, UNI, USDC } from '../constants/tokens';\r\n\r\nconst dollarAbi = require('../constants/abi/Dollar.json');\r\nconst daoAbi = require('../constants/abi/Implementation.json');\r\nconst poolAbi = require('../constants/abi/Pool.json');\r\nconst uniswapRouterAbi = require('../constants/abi/UniswapV2Router02.json');\r\nconst uniswapPairAbi = require('../constants/abi/UniswapV2Pair.json');\r\n\r\nlet web3;\r\n// eslint-disable-next-line no-undef\r\nif (window.ethereum !== undefined) {\r\n  // eslint-disable-next-line no-undef\r\n  web3 = new Web3(ethereum);\r\n}\r\n\r\n/**\r\n *\r\n * @param {string} token address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getTokenBalance = async (token, account) => {\r\n  if (account === '') return '0';\r\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\r\n  return tokenContract.methods.balanceOf(account).call();\r\n};\r\n\r\nexport const getTokenTotalSupply = async (token) => {\r\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\r\n  return tokenContract.methods.totalSupply().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} token\r\n * @param {string} account\r\n * @param {string} spender\r\n * @return {Promise<string>}\r\n */\r\nexport const getTokenAllowance = async (token, account, spender) => {\r\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\r\n  return tokenContract.methods.allowance(account, spender).call();\r\n};\r\n\r\n// BSD Protocol\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getBalanceBonded = async (dao, account) => {\r\n  if (account === '') return '0';\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.balanceOfBonded(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getBalanceOfStaged = async (dao, account) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.balanceOfStaged(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getStatusOf = async (dao, account) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.statusOf(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getFluidUntil = async (dao, account) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.fluidUntil(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getLockedUntil = async (dao, account) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.lockedUntil(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getEpoch = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.epoch().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getEpochTime = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.epochTime().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getTotalDebt = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.totalDebt().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getTotalRedeemable = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.totalRedeemable().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getTotalCoupons = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.totalCoupons().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getTotalBonded = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.totalBonded().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getTotalStaged = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.totalStaged().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {number} epoch number\r\n * @return {Promise<string>}\r\n */\r\nexport const getTotalBondedAt = async (dao, epoch) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.totalBondedAt(epoch).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} candidate address\r\n * @return {Promise<string>}\r\n */\r\nexport const getApproveFor = async (dao, candidate) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.approveFor(candidate).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} candidate address\r\n * @return {Promise<string>}\r\n */\r\nexport const getRejectFor = async (dao, candidate) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.rejectFor(candidate).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} candidate address\r\n * @return {Promise<string>}\r\n */\r\nexport const getStartFor = async (dao, candidate) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.startFor(candidate).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} candidate address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPeriodFor = async (dao, candidate) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.periodFor(candidate).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} candidate address\r\n * @return {Promise<boolean>}\r\n */\r\nexport const getIsInitialized = async (dao, candidate) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.isInitialized(candidate).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @param {string} candidate address\r\n * @return {Promise<string>}\r\n */\r\nexport const getRecordedVote = async (dao, account, candidate) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.recordedVote(account, candidate).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @param {number} epoch number\r\n * @return {Promise<string>}\r\n */\r\nexport const getBalanceOfCoupons = async (dao, account, epoch) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.balanceOfCoupons(account, epoch).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string} account address\r\n * @param {number[]} epochs number[]\r\n * @return {Promise<string[]>}\r\n */\r\nexport const getBatchBalanceOfCoupons = async (dao, account, epochs) => {\r\n  const calls = epochs.map((epoch) => getBalanceOfCoupons(dao, account, epoch));\r\n  return Promise.all(calls);\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {number} epoch address\r\n * @return {Promise<string>}\r\n */\r\nexport const getOutstandingCoupons = async (dao, epoch) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.outstandingCoupons(epoch).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {number} epoch number\r\n * @return {Promise<string>}\r\n */\r\nexport const getCouponsExpiration = async (dao, epoch) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.couponsExpiration(epoch).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {number[]} epochs number[]\r\n * @return {Promise<string[]>}\r\n */\r\nexport const getBatchCouponsExpiration = async (dao, epochs) => {\r\n  const calls = epochs.map((epoch) => getCouponsExpiration(dao, epoch));\r\n  return Promise.all(calls);\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @param {string|BigNumber} amount uint256\r\n * @return {Promise<string>}\r\n */\r\nexport const getCouponPremium = async (dao, amount) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.couponPremium(new BigNumber(amount).toFixed()).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getImplementation = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.implementation().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPool = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  return daoContract.methods.pool().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao\r\n * @param {string} account\r\n * @return {Promise<any[]>}\r\n */\r\nexport const getCouponEpochs = async (dao, account) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  const events = await daoContract.getPastEvents('CouponPurchase', {\r\n    filter: { account },\r\n    fromBlock: 0,\r\n  });\r\n  const couponEpochs = [\r\n    ...events.reduce(\r\n      (map, event) => {\r\n        const { returnValues: { epoch, couponAmount } } = event;\r\n        const prev = map.get(epoch);\r\n\r\n        if (prev) {\r\n          map.set(epoch, { epoch, coupons: prev.coupons.plus(new BigNumber(couponAmount)) });\r\n        } else {\r\n          map.set(epoch, { epoch, coupons: new BigNumber(couponAmount) });\r\n        }\r\n\r\n        return map;\r\n      },\r\n      new Map(),\r\n    ).values(),\r\n  ];\r\n\r\n  return couponEpochs.sort((a, b) => a - b);\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao\r\n * @return {Promise<any[]>}\r\n */\r\nexport const getAllProposals = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  const payload = (await daoContract.getPastEvents('Proposal', {\r\n    fromBlock: 0,\r\n  })).map((event) => {\r\n    const prop = event.returnValues;\r\n    prop.blockNumber = event.blockNumber;\r\n    return prop;\r\n  });\r\n  return payload.sort((a, b) => b.blockNumber - a.blockNumber);\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} dao\r\n * @return {Promise<any[]>}\r\n */\r\nexport const getAllRegulations = async (dao) => {\r\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\r\n  const increaseP = daoContract.getPastEvents('SupplyIncrease', { fromBlock: 0 });\r\n  const decreaseP = daoContract.getPastEvents('SupplyDecrease', { fromBlock: 0 });\r\n  const neutralP = daoContract.getPastEvents('SupplyNeutral', { fromBlock: 0 });\r\n\r\n  const [increase, decrease, neutral] = await Promise.all([increaseP, decreaseP, neutralP]);\r\n\r\n  const events = increase.map((e) => ({ type: 'INCREASE', data: e.returnValues }))\r\n    .concat(decrease.map((e) => ({ type: 'DECREASE', data: e.returnValues })))\r\n    .concat(neutral.map((e) => ({ type: 'NEUTRAL', data: e.returnValues })));\r\n\r\n  return events.sort((a, b) => b.data.epoch - a.data.epoch);\r\n};\r\n\r\n// Uniswap Protocol\r\n\r\nexport const getCost = async (amount) => {\r\n  const exchange = new web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [inputAmount, _] = await exchange.methods.getAmountsIn(\r\n    new BigNumber(amount).toFixed(),\r\n    [USDC.addr, BSD.addr],\r\n  ).call();\r\n  return inputAmount;\r\n};\r\n\r\nexport const getProceeds = async (amount) => {\r\n  const exchange = new web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [_, outputAmount] = await exchange.methods.getAmountsOut(\r\n    new BigNumber(amount).toFixed(),\r\n    [BSD.addr, USDC.addr],\r\n  ).call();\r\n  return outputAmount;\r\n};\r\n\r\nexport const getReserves = async () => {\r\n  const exchange = new web3.eth.Contract(uniswapPairAbi, UNI.addr);\r\n  return exchange.methods.getReserves().call();\r\n};\r\n\r\nexport const getInstantaneousPrice = async () => {\r\n  const [reserve, token0] = await Promise.all([getReserves(), getToken0()]);\r\n  const token0Balance = new BigNumber(reserve.reserve0);\r\n  const token1Balance = new BigNumber(reserve.reserve1);\r\n  if (token0.toLowerCase() === USDC.addr.toLowerCase()) {\r\n    return token0Balance.multipliedBy(new BigNumber(10).pow(12)).dividedBy(token1Balance);\r\n  }\r\n  return token1Balance.multipliedBy(new BigNumber(10).pow(12)).dividedBy(token0Balance);\r\n};\r\n\r\nexport const getToken0 = async () => {\r\n  const exchange = new web3.eth.Contract(uniswapPairAbi, UNI.addr);\r\n  return exchange.methods.token0().call();\r\n};\r\n\r\n// Pool\r\n\r\nexport const getPoolStatusOf = async (pool, account) => {\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.statusOf(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} pool address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPoolBalanceOfBonded = async (pool, account) => {\r\n  if (account === '') return '0';\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.balanceOfBonded(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} pool address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPoolBalanceOfStaged = async (pool, account) => {\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.balanceOfStaged(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} pool address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPoolBalanceOfRewarded = async (pool, account) => {\r\n  if (account === '') return '0';\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.balanceOfRewarded(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} pool address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPoolBalanceOfClaimable = async (pool, account) => {\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.balanceOfClaimable(account).call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} pool address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPoolTotalBonded = async (pool) => {\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.totalBonded().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} pool address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPoolTotalRewarded = async (pool) => {\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.totalRewarded().call();\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} pool address\r\n * @param {string} account address\r\n * @return {Promise<string>}\r\n */\r\nexport const getPoolTotalClaimable = async (pool) => {\r\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\r\n  return poolContract.methods.totalClaimable().call();\r\n};","import BigNumber from 'bignumber.js';\r\n\r\n/**\r\n * Convert 10.999 to 10999000\r\n */\r\nexport function toBaseUnitBN(rawAmt:string| number| BigNumber, decimals: number):BigNumber {\r\n  const raw = new BigNumber(rawAmt);\r\n  const base = new BigNumber(10);\r\n  const decimalsBN = new BigNumber(decimals);\r\n  return raw.times(base.pow(decimalsBN)).integerValue();\r\n}\r\n\r\n/**\r\n * Convert 10999000 to 10.999\r\n */\r\nexport const toTokenUnitsBN = (tokenAmount:string|number|BigNumber, tokenDecimals:number): BigNumber => {\r\n  const amt = new BigNumber(tokenAmount);\r\n  const digits = new BigNumber(10).pow(new BigNumber(tokenDecimals));\r\n  return amt.div(digits);\r\n};\r\n\r\nexport const isPos = (amount: BigNumber): boolean => {\r\n  return !amount.isZero() && amount.isPositive();\r\n};\r\n\r\nexport const ownership = (balance: BigNumber, totalSupply: BigNumber): BigNumber => {\r\n  return balance.multipliedBy(new BigNumber(100)).dividedBy(totalSupply);\r\n}\r\n\r\n/**\r\n * BigNumber string formatting\r\n */\r\n\r\nexport const formatBN = (amount: BigNumber, position: number): string => {\r\n  if (amount.isLessThan(new BigNumber(1))) {\r\n    return pad(amount.precision(position, BigNumber.ROUND_FLOOR).toFixed(), position);\r\n\r\n  }\r\n  return delineate(amount.toFixed(position, BigNumber.ROUND_FLOOR));\r\n}\r\n\r\nfunction delineate(bnStr) {\r\n  const parts = bnStr.split('.');\r\n  return parts[0].toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + \".\" + parts[1];\r\n}\r\n\r\nfunction pad(bnStr, position) {\r\n  if (!bnStr.includes(\".\")) {\r\n    bnStr += \".\";\r\n  }\r\n\r\n  const parts = bnStr.split(\".\");\r\n  for (let i = 0; i < position - parts[1].length; i++) {\r\n    bnStr += \"0\";\r\n  }\r\n\r\n  return bnStr\r\n}\r\n\r\nexport function formatMoney(n) {\r\n  n = n.toPrecision(3)\r\n  return Math.abs(Number(n)) >= 1.0e+9\r\n    ? Math.abs(Number(n)) / 1.0e+9 + \"B\"\r\n    : Math.abs(Number(n)) >= 1.0e+6\r\n      ? Math.abs(Number(n)) / 1.0e+6 + \"MM\"\r\n      : Math.abs(Number(n)) >= 1.0e+3\r\n        ? Math.abs(Number(n)) / 1.0e+3 + \"K\"\r\n        : Math.abs(Number(n));\r\n}","import { getPool } from \"./infura\";\r\nimport { BSDS } from \"../constants/tokens\";\r\nimport {DollarPool1, DollarPool2, DollarPool3, DollarPool4} from \"../constants/contracts\";\r\n\r\nexport async function getPoolAddress(): Promise<string> {\r\n  const pool = await getPool(BSDS.addr);\r\n  if (pool.toLowerCase() === DollarPool2.toLowerCase()) {\r\n    return DollarPool2;\r\n  }\r\n  if (pool.toLowerCase() === DollarPool3.toLowerCase()) {\r\n    return DollarPool3;\r\n  }\r\n  if (pool.toLowerCase() === DollarPool4.toLowerCase()) {\r\n    return DollarPool4;\r\n  }\r\n\r\n  throw \"Unrecognized Pool Address\";\r\n}\r\n\r\nexport function getLegacyPoolAddress(poolAddress): string {\r\n  if (poolAddress === DollarPool2) {\r\n    return DollarPool1;\r\n  }\r\n  if (poolAddress === DollarPool3) {\r\n    return DollarPool2;\r\n  }\r\n  if (poolAddress === DollarPool4) {\r\n    return DollarPool3;\r\n  }\r\n\r\n  throw \"Unrecognized Pool Address\";\r\n}","import React, {useEffect, useState} from 'react';\r\n\r\nimport {\r\n  Button, IdentityBadge, IconConnect, Box, IconPower, LinkBase,\r\n} from '@aragon/ui';\r\n\r\nimport { connect } from '../../utils/web3';\r\nimport BigNumber from \"bignumber.js\";\r\nimport {\r\n  getBalanceBonded,\r\n  getBalanceOfStaged,\r\n  getPoolBalanceOfBonded, getPoolBalanceOfClaimable, getPoolBalanceOfRewarded, getPoolBalanceOfStaged,\r\n  getTokenBalance,\r\n  getTokenTotalSupply\r\n} from \"../../utils/infura\";\r\nimport {BSD, BSDS, UNI, USDC} from \"../../constants/tokens\";\r\nimport {formatBN, toTokenUnitsBN} from \"../../utils/number\";\r\nimport {getPoolAddress} from \"../../utils/pool\";\r\n\r\ntype TotalBalanceProps = {\r\n  user: string,\r\n}\r\n\r\nfunction TotalBalance({ user }: TotalBalanceProps) {\r\n  const [totalBalance, setTotalBalance] = useState(new BigNumber(0));\r\n\r\n  //Update User balances\r\n  useEffect(() => {\r\n    if (user === '') {\r\n      setTotalBalance(new BigNumber(0));\r\n      return;\r\n    }\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const poolAddress = await getPoolAddress();\r\n\r\n      const [\r\n        esdBalance, stagedBalance, bondedBalance,\r\n        pairBalanceBSDStr, pairTotalSupplyUNIStr, userUNIBalanceStr,\r\n        userPoolBondedBalanceStr, userPoolStagedBalanceStr,\r\n        userPoolRewardedBalanceStr, userPoolClaimableBalanceStr,\r\n      ] = await Promise.all([\r\n        getTokenBalance(BSD.addr, user),\r\n        getBalanceOfStaged(BSDS.addr, user),\r\n        getBalanceBonded(BSDS.addr, user),\r\n\r\n        getTokenBalance(BSD.addr, UNI.addr),\r\n        getTokenTotalSupply(UNI.addr),\r\n        getTokenBalance(UNI.addr, user),\r\n        getPoolBalanceOfBonded(poolAddress, user),\r\n        getPoolBalanceOfStaged(poolAddress, user),\r\n        getPoolBalanceOfRewarded(poolAddress, user),\r\n        getPoolBalanceOfClaimable(poolAddress, user),\r\n      ]);\r\n\r\n      const userBalance = toTokenUnitsBN(new BigNumber(esdBalance), BSD.decimals);\r\n      const userStagedBalance = toTokenUnitsBN(new BigNumber(stagedBalance), BSDS.decimals);\r\n      const userBondedBalance = toTokenUnitsBN(new BigNumber(bondedBalance), BSDS.decimals);\r\n\r\n      const userUNIBalance = toTokenUnitsBN(new BigNumber(userUNIBalanceStr), BSDS.decimals);\r\n      const userPoolBondedBalance = toTokenUnitsBN(new BigNumber(userPoolBondedBalanceStr), BSDS.decimals);\r\n      const userPoolStagedBalance = toTokenUnitsBN(new BigNumber(userPoolStagedBalanceStr), BSDS.decimals);\r\n      const userPoolRewardedBalance = toTokenUnitsBN(new BigNumber(userPoolRewardedBalanceStr), BSDS.decimals);\r\n      const userPoolClaimableBalance = toTokenUnitsBN(new BigNumber(userPoolClaimableBalanceStr), BSDS.decimals);\r\n\r\n      const UNItoBSD = new BigNumber(pairBalanceBSDStr).dividedBy(new BigNumber(pairTotalSupplyUNIStr));\r\n\r\n      const daoTotalBalance = userStagedBalance.plus(userBondedBalance);\r\n      const poolTotalBalance = UNItoBSD.multipliedBy(userPoolStagedBalance.plus(userPoolBondedBalance))\r\n        .plus(userPoolRewardedBalance.plus(userPoolClaimableBalance));\r\n      const circulationBalance = UNItoBSD.multipliedBy(userUNIBalance).plus(userBalance)\r\n\r\n      const totalBalance = daoTotalBalance.plus(poolTotalBalance).plus(circulationBalance)\r\n\r\n      if (!isCancelled) {\r\n        setTotalBalance(totalBalance);\r\n      }\r\n    }\r\n\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <div style={{ fontSize: 14, padding: 3, fontWeight: 400, lineHeight: 1.5, fontFamily: 'aragon-ui-monospace, monospace'}}>\r\n      {formatBN(totalBalance, 2)}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default TotalBalance;\r\n","const BoxStyle = `\r\n  transition: transform 100ms ease-in-out;\r\n  will-change: transform;\r\n  color: #002884;\r\n  box-shadow: 6px 6px 0px #3f50b5;\r\n  padding: 4px 8px;\r\n  border: 4px solid rgba(255, 255, 255, 0.9);\r\n  border-radius: 0;\r\n  outline: none;\r\n  background: #fff;\r\n`;\r\n\r\nexport default BoxStyle;\r\n","import React, { useState } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport {\r\n  Button, IdentityBadge, IconConnect, Box, IconPower, LinkBase,\r\n} from '@aragon/ui';\r\n\r\nimport { connect } from '../../utils/web3';\r\nimport TotalBalance from \"./TotalBalance\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\nconst ButtonComponent = styled(Button)`\r\n  ${BoxStyle}\r\n`;\r\n\r\ntype connectButtonProps = {\r\n  hasWeb3: boolean,\r\n  user: string,\r\n  setUser: Function\r\n}\r\n\r\nfunction ConnectButton({ hasWeb3, user, setUser }: connectButtonProps) {\r\n  const [isConnected, setIsConnected] = useState(false);\r\n\r\n  const connectWeb3 = async () => {\r\n    const address = await connect();\r\n    if (address === false) return;\r\n    setIsConnected(true);\r\n    setUser(address);\r\n  };\r\n\r\n  const disconnectWeb3 = async () => {\r\n    setIsConnected(false);\r\n    setUser('');\r\n  };\r\n\r\n  return isConnected ? (\r\n    <div style={{display: 'flex'}}>\r\n      <div style={{flex: '1'}}/>\r\n      <div>\r\n        <ButtonComponent>\r\n          <div style={{display: 'flex', alignItems: 'center'}}>\r\n            <div>\r\n              <LinkBase onClick={disconnectWeb3} style={{marginRight: '8px', height: '24px'}}>\r\n                <IconPower />\r\n              </LinkBase>\r\n            </div>\r\n            <div style={{flex: '1', textAlign: 'right'}}>\r\n              <IdentityBadge entity={user} />\r\n            </div>\r\n          </div>\r\n          <div style={{display: 'flex'}}>\r\n            <div style={{flex: '1', textAlign: 'right'}}>\r\n              <TotalBalance user={user} />\r\n            </div>\r\n          </div>\r\n        </ButtonComponent>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    <ButtonComponent icon={<IconConnect style={{ color: '#002884'}} />} label=\"Connect\" onClick={connectWeb3} disabled={!hasWeb3}/>\r\n  );\r\n}\r\n\r\n\r\nexport default ConnectButton;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\n\r\nimport { LinkBase, Button, useTheme } from '@aragon/ui';\r\nimport ConnectButton from './ConnectButton';\r\nimport TotalBalance from \"./TotalBalance\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\nconst LinkComponent = styled(Button)`\r\n  ${BoxStyle}\r\n  margin: 0 8px;\r\n`;\r\n\r\ntype NavbarProps = {\r\n  hasWeb3: boolean,\r\n  user: string,\r\n  setUser: Function\r\n}\r\n\r\nfunction NavBar({\r\n  hasWeb3, user, setUser,\r\n}:NavbarProps) {\r\n  const history = useHistory();\r\n  const currentTheme = useTheme();\r\n\r\n  const [isHome, updateIsHome] = useState(true);\r\n  const [page, setPage] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const home = history.location.pathname === '/';\r\n    updateIsHome(home);\r\n    return history.listen((location) => {\r\n      setPage(location.pathname)\r\n      const home = history.location.pathname === '/';\r\n      updateIsHome(home);\r\n    })\r\n  }, [hasWeb3, user, history]);\r\n\r\n  const logoUrl = `./logo/logo_${currentTheme._name === 'light' ? 'black' : 'white'}.svg`\r\n\r\n  return (\r\n    <>\r\n      <div style={{\r\n        borderTop: '1px solid ' + currentTheme.border,\r\n        backgroundColor: 'none',\r\n        textAlign: 'center',\r\n        height: '128px',\r\n        width: '100%',\r\n        fontSize: '14px'\r\n      }}>\r\n        <div style={{maxWidth: '1100px', marginLeft: 'auto', marginRight: 'auto'}}>\r\n          <div style={{ display: 'flex', paddingTop: '24px'}}>\r\n            <div style={{ width: '80%', textAlign: 'left' }}>\r\n              <LinkButton title=\"Home\" onClick={() => history.push('/')} isSelected={page.includes('/')}/>\r\n              <LinkButton title=\"DAO\" onClick={() => history.push('/dao/')} isSelected={page.includes('/dao')}/>\r\n              <LinkButton title=\"Liquidity\" onClick={() => history.push('/pool/')} isSelected={page.includes('/pool')}/>\r\n              <LinkButton title=\"Regulation\" onClick={() => history.push('/regulation/')} isSelected={page.includes('/regulation')}/>\r\n              <LinkButton title=\"Governance\" onClick={() => history.push('/governance/')} isSelected={page.includes('/governance')}/>\r\n              <LinkButton title=\"Trade\" onClick={() => history.push('/trade/')} isSelected={page.includes('/trade')}/>\r\n              <LinkButton title=\"Coupons\" onClick={() => history.push('/coupons/')} isSelected={page.includes('/coupons')}/>\r\n            </div>\r\n            <div style={{ width: '20%', textAlign: 'right'}}>\r\n              <ConnectButton hasWeb3={hasWeb3} user={user} setUser={setUser} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\n\r\ntype linkButtonProps = {\r\n  title:string,\r\n  onClick: Function,\r\n  isSelected?:boolean\r\n}\r\n\r\nfunction LinkButton({ title, onClick, isSelected = false }:linkButtonProps) {\r\n  return (\r\n      <LinkBase onClick={onClick}>\r\n        <LinkComponent>\r\n          <div style={{ fontSize: 17, paddingTop: '1%' }}>{title}</div>\r\n        </LinkComponent>\r\n      </LinkBase>\r\n  );\r\n}\r\n\r\nexport default NavBar;\r\n","import React, {useCallback, useEffect, useState} from 'react';\r\nimport {\r\n  Button\r\n} from '@aragon/ui';\r\nimport {advance, connect} from \"../../utils/web3\";\r\nimport {BSDS} from \"../../constants/tokens\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport {getEpoch, getEpochTime} from \"../../utils/infura\";\r\n\r\ntype EpochBlockProps = {\r\n  epoch: string\r\n}\r\n\r\nfunction EpochBlock({ epoch }: EpochBlockProps) {\r\n  const [epochCurrent, setEpochCurrent] = useState(new BigNumber(0));\r\n  const [epochTime, setEpochTime] = useState(new BigNumber(0));\r\n\r\n  useEffect(() => {\r\n    const fetch = async () => {\r\n      const [ fetchedEpoch, fetchedEpochTime ] = await Promise.all([\r\n        getEpoch(BSDS.addr),\r\n        getEpochTime(BSDS.addr)\r\n      ]);\r\n\r\n      setEpochCurrent(new BigNumber(fetchedEpoch));\r\n      setEpochTime(new BigNumber(fetchedEpochTime));\r\n    }\r\n\r\n    fetch();\r\n\r\n    const fetchInterval = setInterval(fetch, 10000);\r\n    return () => clearInterval(fetchInterval);\r\n  }, [setEpochCurrent, setEpochTime]);\r\n\r\n  const handleAdvance = useCallback(async () => {\r\n    await connect();\r\n    await advance(BSDS.addr);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div style={{ fontSize: 16, padding: 3 }}>Epoch</div>\r\n      <div style={{ fontSize: 24, padding: 3, fontWeight: 400, lineHeight: 1.5, fontFamily: 'aragon-ui-monospace, monospace'}}>{epoch}</div>\r\n      <Button\r\n        wide\r\n        label=\"Advance\"\r\n        onClick={async () => { await handleAdvance(); }}\r\n        disabled={epochTime.eq(0) || epochTime.lte(epochCurrent)}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EpochBlock;\r\n","import BigNumber from 'bignumber.js';\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const MAX_UINT256 = new BigNumber(2).pow(256).minus(1);\r\nexport const GOVERNANCE_QUORUM = new BigNumber('0.20');\r\nexport const GOVERNANCE_PROPOSAL_THRESHOLD = new BigNumber('0.005');\r\nexport const COUPON_EXPIRATION = 360;\r\nexport const DAO_EXIT_LOCKUP_EPOCHS = 72;\r\nexport const POOL_EXIT_LOCKUP_EPOCHS = 24;\r\nexport const EPOCH_START = 1609261200;\r\nexport const EPOCH_PERIOD = 3600;","import React, {useEffect, useState} from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport {\r\n  Header, Box, LinkBase, Tag,\r\n} from '@aragon/ui';\r\nimport EpochBlock from \"../common/EpochBlock\";\r\nimport BoxStyle from '../common/BoxStyle';\r\nimport { EPOCH_START, EPOCH_PERIOD } from '../../constants/values';\r\n\r\nconst BoxComponent = styled(Box)`${BoxStyle}`;\r\n\r\nfunction epochformatted() {\r\n  const epochStart = EPOCH_START;\r\n  const epochPeriod = EPOCH_PERIOD;\r\n  const hour = 60 * 60;\r\n  const minute = 60;\r\n  const unixTimeSec = Math.floor(Date.now() / 1000);\r\n\r\n  let epochRemainder = unixTimeSec - epochStart\r\n  const epoch = Math.floor(epochRemainder / epochPeriod);\r\n  epochRemainder -= epoch * epochPeriod;\r\n  const epochHour = Math.floor(epochRemainder / hour);\r\n  epochRemainder -= epochHour * hour;\r\n  const epochMinute = Math.floor(epochRemainder / minute);\r\n  epochRemainder -= epochMinute * minute;\r\n  return `${epoch}-0${epochHour}:${epochMinute > 9 ? epochMinute : \"0\" + epochMinute.toString()}:${epochRemainder > 9 ? epochRemainder : \"0\" + epochRemainder.toString()}`;\r\n}\r\n\r\ntype HomePageProps = {\r\n  user: string\r\n};\r\n\r\nfunction HomePage({user}: HomePageProps) {\r\n  const history = useHistory();\r\n\r\n  const [epochTime, setEpochTime] = useState(\"0-00:00:00\");\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      if (!isCancelled) {\r\n        setEpochTime(epochformatted())\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 1000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n      <div style={{ padding: '1%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\r\n        <div style={{ flexBasis: '68%' }} />\r\n        <div style={{ flexBasis: '30%', flexGrow: 1, marginRight: '2%', textAlign: 'right'}}>\r\n          <BoxComponent>\r\n            <EpochBlock epoch={epochTime}/>\r\n          </BoxComponent>\r\n        </div>\r\n      </div>\r\n      <div style={{ padding: '1%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\r\n        <div style={{ flexBasis: '30%', marginRight: '3%', marginLeft: '2%'  }}>\r\n          <MainButton\r\n            title=\"DAO\"\r\n            description=\"Earn rewards for governing\"\r\n            icon={<i className=\"fas fa-dot-circle\"/>}\r\n            onClick={() => {\r\n              history.push('/dao/');\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <div style={{ flexBasis: '30%' }}>\r\n          <MainButton\r\n            title=\"LP Rewards\"\r\n            description=\"Earn rewards for providing liquidity.\"\r\n            icon={<i className=\"fas fa-parachute-box\"/>}\r\n            onClick={() => {\r\n              history.push('/pool/');\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <div style={{ flexBasis: '30%', marginLeft: '3%', marginRight: '2%' }}>\r\n          <MainButton\r\n            title=\"Regulation\"\r\n            description=\"Network supply regulation statistics.\"\r\n            icon={<i className=\"fas fa-chart-area\"/>}\r\n            onClick={() => {\r\n              history.push('/regulation/');\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div style={{ padding: '1%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\r\n        <div style={{ flexBasis: '30%', marginRight: '3%', marginLeft: '2%' }}>\r\n          <MainButton\r\n            title=\"Governance\"\r\n            description=\"Vote on upgrades.\"\r\n            icon={<i className=\"fas fa-poll\"/>}\r\n            onClick={() => {\r\n              history.push('/governance/');\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <div style={{ flexBasis: '30%' }}>\r\n          <MainButton\r\n            title=\"Trade\"\r\n            description=\"Trade BSD tokens.\"\r\n            icon={<i className=\"fas fa-exchange-alt\"/>}\r\n            onClick={() => {\r\n              history.push('/trade/');\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <div style={{ flexBasis: '30%', marginLeft: '3%', marginRight: '2%'  }}>\r\n          <MainButton\r\n            title=\"Coupons\"\r\n            description=\"Purchase and redeem coupons.\"\r\n            icon={<i className=\"fas fa-ticket-alt\"/>}\r\n            onClick={() => {\r\n              history.push('/coupons/');\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\ntype MainButtonPropx = {\r\n  title: string,\r\n  description: string,\r\n  icon: any,\r\n  onClick: Function,\r\n  tag?:string\r\n}\r\n\r\nfunction MainButton({\r\n  title, description, icon, onClick, tag,\r\n}:MainButtonPropx) {\r\n  return (\r\n    <LinkBase onClick={onClick} style={{ width: '100%' }}>\r\n      <BoxComponent>\r\n        <div style={{ padding: 10, fontSize: 18 }}>\r\n          {title}\r\n          {tag ? <Tag>{tag}</Tag> : <></>}\r\n        </div>\r\n        <span style={{ fontSize: 48 }}>\r\n          {icon}\r\n        </span>\r\n        {/*<img alt=\"icon\" style={{ padding: 10, height: 64 }} src={iconUrl} />*/}\r\n        <div style={{ paddingTop: 5, opacity: 0.5 }}>\r\n          {' '}\r\n          {description}\r\n          {' '}\r\n        </div>\r\n\r\n      </BoxComponent>\r\n    </LinkBase>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n","import React from 'react';\r\nimport { IdentityBadge } from '@aragon/ui';\r\n\r\ntype AddressBlockProps = {\r\n  label:string,\r\n  address: string\r\n}\r\n\r\nfunction AddressBlock({ label, address }: AddressBlockProps) {\r\n  return (\r\n    <>\r\n      <div style={{ fontSize: 16, padding: 3 }}>{label}</div>\r\n      <div style={{ padding: 5 }}>\r\n        <IdentityBadge entity={address} shorten />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddressBlock;\r\n","import React from 'react';\r\n\r\nimport BigNumber from 'bignumber.js';\r\nimport {formatBN} from \"../../utils/number\";\r\n\r\ntype BlanceBlockProps = {\r\n  asset: string,\r\n  balance: BigNumber | string | number\r\n  suffix?: string\r\n}\r\n\r\nfunction BalanceBlock({ asset, balance, suffix=\"\"}: BlanceBlockProps) {\r\n  let integer = '0';\r\n  let digits = '0';\r\n  const balanceBN = new BigNumber(balance);\r\n  if (balanceBN.gte(new BigNumber(0))) {\r\n    const tokens = formatBN(balanceBN, 2).split('.')\r\n    integer = tokens[0];\r\n    digits = tokens[1];\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div style={{ fontSize: 14, padding: 3 }}>{asset}</div>\r\n      <div style={{ padding: 3 }}>\r\n        <span style={{ fontSize: 24 }}>{integer}</span>\r\n        .\r\n        <span style={{ fontSize: 18 }}>\r\n          {' '}\r\n          {digits}\r\n          {' '}\r\n        </span>\r\n        {suffix === \"\" ? '' : <span style={{ fontSize: 18 }}>{suffix}</span> }\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default BalanceBlock;\r\n","import React from 'react';\r\n\r\nimport {\r\n  ButtonBase,\r\n} from '@aragon/ui';\r\n\r\nfunction MaxButton({ onClick }:{ onClick: Function }) {\r\n  return (\r\n    <div style={{ padding: 3 }}>\r\n      <ButtonBase onClick={onClick}>\r\n        <span style={{ opacity: 0.5 }}> Max </span>\r\n      </ButtonBase>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MaxButton;\r\n","import React from 'react';\r\nimport BigNumber from 'bignumber.js';\r\n\r\nfunction PriceSection({\r\n  label, amt, symbol = '', forceDisplay = false,\r\n}:{label:string, amt: string|number|BigNumber, symbol?:string, forceDisplay?:boolean }) {\r\n  const amtBN = new BigNumber(amt);\r\n  if (amtBN.gt(new BigNumber(0)) || forceDisplay) {\r\n    return (\r\n      <div style={{ padding: 3, opacity: 0.5 }}>\r\n        <span style={{ fontSize: 13 }}>{label}</span>\r\n        <span style={{ fontSize: 13 }}>{amtBN.toNumber().toFixed(5)}</span>\r\n        <span style={{ fontSize: 13 }}>{symbol}</span>\r\n      </div>\r\n    );\r\n  }\r\n  return <div style={{ padding: 3, opacity: 0.5 }} />;\r\n}\r\n\r\n\r\nexport default PriceSection;\r\n","import styled from 'styled-components';\r\n\r\nconst FlexWrapper = styled.div`\r\n  // display: flex;\r\n  padding-left: 20%;\r\n  padding-right: 20%;\r\n`;\r\n\r\nexport default FlexWrapper;\r\n","import React from 'react';\r\nimport { Checkbox, useTheme } from '@aragon/ui';\r\nimport styled from 'styled-components';\r\n\r\ntype checkBoxProps = {\r\n  text: string,\r\n  checked: boolean,\r\n  onCheck: Function\r\n}\r\n\r\nfunction MyCheckBox({ text, checked, onCheck }: checkBoxProps) {\r\n  const theme = useTheme();\r\n  return (\r\n    <CheckBoxWrapper theme={theme}>\r\n      <Checkbox\r\n        checked={checked}\r\n        onChange={onCheck}\r\n      />\r\n      <span style={{ margin: '4px' }}>\r\n        {text}\r\n      </span>\r\n      <br />\r\n    </CheckBoxWrapper>\r\n  );\r\n}\r\n\r\nexport default MyCheckBox;\r\n\r\nconst CheckBoxWrapper = styled.div`{\r\n  display: flex;\r\n  font-size: 14px;\r\n  color: ${(props) => props.theme.surfaceContentSecondary}\r\n}`;","import React from 'react';\r\nimport BigNumber from 'bignumber.js';\r\nimport styled from 'styled-components';\r\nimport { BalanceBlock, AddressBlock } from '../common/index';\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype TradePageHeaderProps = {\r\n  pairBalanceBSD: BigNumber,\r\n  pairBalanceUSDC: BigNumber,\r\n  uniswapPair: string,\r\n};\r\n\r\nconst Container = styled.div`${BoxStyle} margin-bottom: 32px;`;\r\n\r\nconst TradePageHeader = ({\r\n  pairBalanceBSD, pairBalanceUSDC, uniswapPair,\r\n}: TradePageHeaderProps) => {\r\n  const price = pairBalanceUSDC.dividedBy(pairBalanceBSD);\r\n\r\n  return (\r\n    <Container style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\r\n      <div style={{ flexBasis: '25%' }}>\r\n        <BalanceBlock asset=\"BSD Price\" balance={price} suffix={\"USDC\"}/>\r\n      </div>\r\n      <div style={{ flexBasis: '25%' }}>\r\n        <BalanceBlock asset=\"BSD Liquidity\" balance={pairBalanceBSD} suffix={\"BSD\"}/>\r\n      </div>\r\n      <div style={{ flexBasis: '25%' }}>\r\n        <BalanceBlock asset=\"USDC Liquidity\" balance={pairBalanceUSDC} suffix={\"USDC\"}/>\r\n      </div>\r\n      <div style={{ flexBasis: '25%' }}>\r\n        <>\r\n          <AddressBlock label=\"Uniswap Contract\" address={uniswapPair} />\r\n        </>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n\r\n\r\nexport default TradePageHeader;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport {\r\n  Header,\r\n} from '@aragon/ui';\r\n\r\ntype IconHeaderProps = {\r\n  icon: any,\r\n  text: string\r\n}\r\n\r\nconst HeaderWrapper = styled(Header)`\r\n  h1 {\r\n    color: rgba(255, 255, 255, 0.8) !important;\r\n  }\r\n`\r\n\r\nfunction IconHeader({ icon, text }: IconHeaderProps) {\r\n  return (\r\n    <>\r\n      <div style={{ padding: '1%', display: 'flex', alignItems: 'center' }}>\r\n        <div style={{ marginRight: '2%', fontSize: 48 }}>\r\n          {icon}\r\n        </div>\r\n        <div>\r\n          <HeaderWrapper primary={text} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default IconHeader;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { LinkBase, Box } from '@aragon/ui';\r\nimport styled from 'styled-components';\r\nimport BigNumber from 'bignumber.js';\r\nimport { getTokenBalance } from '../../utils/infura';\r\nimport { toTokenUnitsBN } from '../../utils/number';\r\n\r\nimport TradePageHeader from './Header';\r\nimport {BSD, UNI, USDC} from \"../../constants/tokens\";\r\nimport IconHeader from \"../common/IconHeader\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\nconst Container = styled(Box)`${BoxStyle}`;\r\n\r\nfunction UniswapPool({ user }: {user: string}) {\r\n  const [pairBalanceBSD, setPairBalanceBSD] = useState(new BigNumber(0));\r\n  const [pairBalanceUSDC, setPairBalanceUSDC] = useState(new BigNumber(0));\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [\r\n        pairBalanceBSDStr, pairBalanceUSDCStr,\r\n      ] = await Promise.all([\r\n        getTokenBalance(BSD.addr, UNI.addr),\r\n        getTokenBalance(USDC.addr, UNI.addr),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        setPairBalanceBSD(toTokenUnitsBN(pairBalanceBSDStr, BSD.decimals));\r\n        setPairBalanceUSDC(toTokenUnitsBN(pairBalanceUSDCStr, USDC.decimals));\r\n      }\r\n    }\r\n\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n      <div style={{ color: 'rgba(255, 255, 255, 0.8)' }}>\r\n        <IconHeader icon={<i className=\"fas fa-exchange-alt\"/>} text=\"Trade\"/>\r\n      </div>\r\n\r\n      <TradePageHeader\r\n        pairBalanceBSD={pairBalanceBSD}\r\n        pairBalanceUSDC={pairBalanceUSDC}\r\n        uniswapPair={UNI.addr}\r\n      />\r\n\r\n      <div style={{ display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\r\n        <div style={{ flexBasis: '30%', marginRight: '5%'  }}>\r\n          <MainButton\r\n            title=\"Info\"\r\n            description=\"View BSD-USDC pool stats.\"\r\n            icon={<i className=\"fas fa-chart-area\"/>}\r\n            href={\"https://uniswap.info/pair/0x043F62e75D3e74f47a91408a8376bf00391Aa227\"}\r\n          />\r\n        </div>\r\n\r\n        <div style={{ flexBasis: '30%' }}>\r\n          <MainButton\r\n            title=\"Trade\"\r\n            description=\"Trade BSD tokens.\"\r\n            icon={<i className=\"fas fa-exchange-alt\"/>}\r\n            href={\"https://uniswap.exchange/swap?inputCurrency=0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48&outputCurrency=0x0afB6a6ba319202464c75eD09F2010d883257cA9\"}\r\n          />\r\n        </div>\r\n\r\n        <div style={{ flexBasis: '30%', marginLeft: '5%' }}>\r\n          <MainButton\r\n            title=\"Supply\"\r\n            description=\"Supply and redeem liquidity.\"\r\n            icon={<i className=\"fas fa-water\"/>}\r\n            href={\"https://uniswap.exchange/add/0x0afB6a6ba319202464c75eD09F2010d883257cA9/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48\"}\r\n          />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\ntype MainButtonProps = {\r\n  title: string,\r\n  description: string,\r\n  icon: any,\r\n  href:string\r\n}\r\n\r\nfunction MainButton({\r\n  title, description, icon, href,\r\n}:MainButtonProps) {\r\n  return (\r\n    <LinkBase href={href} style={{ width: '100%' }}>\r\n      <Container>\r\n        <div style={{ padding: 10, fontSize: 18 }}>\r\n          {title}\r\n        </div>\r\n        <span style={{ fontSize: 48 }}>\r\n          {icon}\r\n        </span>\r\n        {/*<img alt=\"icon\" style={{ padding: 10, height: 64 }} src={iconUrl} />*/}\r\n        <div style={{ paddingTop: 5, opacity: 0.5 }}>\r\n          {' '}\r\n          {description}\r\n          {' '}\r\n        </div>\r\n\r\n      </Container>\r\n    </LinkBase>\r\n  );\r\n}\r\n\r\nexport default UniswapPool;\r\n","import React from 'react';\r\nimport { LinkBase, useTheme } from '@aragon/ui';\r\nimport ChangeModeButton from \"./SwitchTheme\";\r\n\r\ntype FooterProps = {\r\n  updateTheme: Function,\r\n  theme: string,\r\n  hasWeb3: boolean,\r\n}\r\n\r\nfunction Footer({updateTheme, theme, hasWeb3}: FooterProps) {\r\n  const currentTheme = useTheme();\r\n\r\n  return (\r\n    <>\r\n      <div style={{\r\n        borderTop: '1px solid ' + currentTheme.border,\r\n        backgroundColor: currentTheme.surface,\r\n        textAlign: 'center',\r\n        position: 'fixed',\r\n        left: '0',\r\n        bottom: '0',\r\n        height: 'auto',\r\n        width: '100%',\r\n        fontSize: '14px'\r\n      }}>\r\n        <div style={{maxWidth: '1100px', marginLeft: 'auto', marginRight: 'auto'}}>\r\n          <div style={{ padding: '2%', display: 'flex'}}>\r\n            <div style={{ width: '50%', textAlign: 'left' }}>\r\n              <FooterLink icon={<i className=\"fab fa-github\"/>} href={\"https://github.com/bullswap-protocol\"}/>\r\n              {/* <FooterLink icon={<i className=\"fab fa-twitter\"/>} href={\"https://www.twitter.com/emptysetsquad\"}/> */}\r\n              {/* <FooterLink icon={<i className=\"fab fa-medium\"/>} href={\"https://www.medium.com/@emptysetsquad\"}/> */}\r\n              <FooterLink icon={<i className=\"fab fa-telegram\"/>} href={\"https://t.me/bullswapexchange\"}/>\r\n              {/* <FooterLink icon={<i className=\"fab fa-discord\"/>} href={\"https://discord.gg/vPws9Vp\"}/> */}\r\n            </div>\r\n            <div style={{ width: '45%', textAlign: 'right', height: '18px', marginTop: '15px', marginBottom: '15px'}}>\r\n              BullSwap Protocol\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\ntype FooterLinkProp = {\r\n  icon: any,\r\n  href: string,\r\n}\r\n\r\nfunction FooterLink({\r\n  icon, href,\r\n}:FooterLinkProp) {\r\n  return (\r\n    <LinkBase href={href} style={{marginLeft: '8px', marginRight: '8px'}}>\r\n      <span style={{ fontSize: 32 }}>{icon}</span>\r\n    </LinkBase>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\n\r\ntype TextBlockProps = {\r\n  label: string,\r\n  text: string\r\n}\r\n\r\nfunction TextBlock({ label, text }: TextBlockProps) {\r\n  return (\r\n    <>\r\n      <div style={{ fontSize: 16, padding: 3 }}>{label}</div>\r\n      <div style={{ fontSize: 24, padding: 3 }}>{text}</div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TextBlock;\r\n","import React from 'react';\r\nimport BigNumber from 'bignumber.js';\r\nimport styled from 'styled-components';\r\nimport { BalanceBlock } from '../common/index';\r\nimport TextBlock from \"../common/TextBlock\";\r\nimport {ownership} from \"../../utils/number\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype AccountPageHeaderProps = {\r\n  accountBSDBalance: BigNumber,\r\n  accountBSDSBalance: BigNumber,\r\n  totalBSDSSupply: BigNumber,\r\n  accountStagedBalance: BigNumber,\r\n  accountBondedBalance: BigNumber,\r\n  accountStatus: number,\r\n  unlocked: number,\r\n};\r\n\r\nconst Container = styled.div`\r\n  ${BoxStyle}\r\n  margin-bottom: 32px;\r\n`;\r\nconst STATUS_MAP = [\"Unlocked\", \"Locked\", \"Locked\"];\r\n\r\nfunction status(accountStatus, unlocked) {\r\n  return STATUS_MAP[accountStatus] + (accountStatus == 0 ? \"\" : \" until \" + unlocked)\r\n}\r\n\r\nconst AccountPageHeader = ({\r\n  accountBSDBalance, accountBSDSBalance, totalBSDSSupply, accountStagedBalance, accountBondedBalance, accountStatus, unlocked\r\n}: AccountPageHeaderProps) => (\r\n  <Container style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\r\n    <div style={{ flexBasis: '20%' }}>\r\n      <BalanceBlock asset=\"Balance\" balance={accountBSDBalance} suffix={\" BSD\"}/>\r\n    </div>\r\n    <div style={{ flexBasis: '20%' }}>\r\n      <BalanceBlock asset=\"Staged\" balance={accountStagedBalance}  suffix={\" BSD\"}/>\r\n    </div>\r\n    <div style={{ flexBasis: '20%' }}>\r\n      <BalanceBlock asset=\"Bonded\" balance={accountBondedBalance} suffix={\" BSD\"} />\r\n    </div>\r\n    <div style={{ flexBasis: '20%' }}>\r\n      <BalanceBlock asset=\"DAO Ownership\" balance={ownership(accountBSDSBalance, totalBSDSSupply)}  suffix={\"%\"}/>\r\n    </div>\r\n    <div style={{ flexBasis: '20%' }}>\r\n      <TextBlock label=\"Status\" text={status(accountStatus, unlocked)}/>\r\n    </div>\r\n  </Container>\r\n);\r\n\r\n\r\nexport default AccountPageHeader;\r\n","import React from 'react';\r\n\r\nimport BigNumber from 'bignumber.js';\r\nimport {\r\n  TextInput,\r\n} from '@aragon/ui';\r\n\r\ntype BigNumberInputProps = {\r\n  value: BigNumber,\r\n  setter: (value: BigNumber) => void\r\n  adornment?: any,\r\n  disabled?: boolean\r\n}\r\n\r\nfunction BigNumberInput({ value, setter, adornment, disabled=false }: BigNumberInputProps) {\r\n  return (\r\n    <>\r\n      <TextInput\r\n        type=\"number\"\r\n        adornmentPosition=\"end\"\r\n        adornment={adornment}\r\n        wide\r\n        value={value.isNegative() ? '' : value.toFixed()}\r\n        onChange={(event) => {\r\n          if (event.target.value) {\r\n            setter(new BigNumber(event.target.value));\r\n          } else {\r\n            setter(new BigNumber(-1));\r\n          }\r\n        }}\r\n        onBlur={() => {\r\n          if (value.isNegative()) {\r\n            setter(new BigNumber(0))\r\n          }\r\n        }}\r\n        disabled={disabled}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default BigNumberInput;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Box, Button, IconCirclePlus, IconCircleMinus, IconLock\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport styled from 'styled-components';\r\nimport {\r\n  BalanceBlock, MaxButton,\r\n} from '../common/index';\r\nimport {approve, deposit, withdraw} from '../../utils/web3';\r\nimport {isPos, toBaseUnitBN} from '../../utils/number';\r\nimport {BSD, BSDS} from \"../../constants/tokens\";\r\nimport {MAX_UINT256} from \"../../constants/values\";\r\nimport BigNumberInput from \"../common/BigNumberInput\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype WithdrawDepositProps = {\r\n  user: string\r\n  balance: BigNumber,\r\n  allowance: BigNumber,\r\n  stagedBalance: BigNumber,\r\n  status: number\r\n};\r\n\r\nconst Container = styled(Box)`${BoxStyle} margin-bottom: 32px;`;\r\n\r\nfunction WithdrawDeposit({\r\n  user, balance, allowance, stagedBalance, status\r\n}: WithdrawDepositProps) {\r\n  const [depositAmount, setDepositAmount] = useState(new BigNumber(0));\r\n  const [withdrawAmount, setWithdrawAmount] = useState(new BigNumber(0));\r\n\r\n  return (\r\n    <Container heading=\"Stage\">\r\n      {allowance.comparedTo(MAX_UINT256) === 0 ?\r\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\r\n          {/* total Issued */}\r\n          <div style={{flexBasis: '30%'}}>\r\n            <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"BSD\"}/>\r\n          </div>\r\n          {/* Deposit BSD into DAO */}\r\n          <div style={{flexBasis: '32%', paddingTop: '2%'}}>\r\n            <div style={{display: 'flex'}}>\r\n              <div style={{width: '60%', minWidth: '6em'}}>\r\n                <>\r\n                  <BigNumberInput\r\n                    adornment=\"BSD\"\r\n                    value={depositAmount}\r\n                    setter={setDepositAmount}\r\n                    disabled={status !== 0}\r\n                  />\r\n                  <MaxButton\r\n                    onClick={() => {\r\n                      setDepositAmount(balance);\r\n                    }}\r\n                  />\r\n                </>\r\n              </div>\r\n              <div style={{width: '40%', minWidth: '6em'}}>\r\n                <Button\r\n                  wide\r\n                  icon={status == 0 ? <IconCirclePlus/> : <IconLock/>}\r\n                  label=\"Deposit\"\r\n                  onClick={() => {\r\n                    deposit(\r\n                      BSDS.addr,\r\n                      toBaseUnitBN(depositAmount, BSD.decimals),\r\n                    );\r\n                  }}\r\n                  disabled={status === 1 || !isPos(depositAmount) || depositAmount.isGreaterThan(balance)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div style={{flexBasis: '6%'}}/>\r\n          {/* Withdraw BSD from DAO */}\r\n          <div style={{flexBasis: '32%', paddingTop: '2%'}}>\r\n            <div style={{display: 'flex'}}>\r\n              <div style={{width: '60%', minWidth: '7em'}}>\r\n                <>\r\n                  <BigNumberInput\r\n                    adornment=\"BSD\"\r\n                    value={withdrawAmount}\r\n                    setter={setWithdrawAmount}\r\n                    disabled={status !== 0}\r\n                  />\r\n                  <MaxButton\r\n                    onClick={() => {\r\n                      setWithdrawAmount(stagedBalance);\r\n                    }}\r\n                  />\r\n                </>\r\n              </div>\r\n              <div style={{width: '40%', minWidth: '7em'}}>\r\n                <Button\r\n                  wide\r\n                  icon={status === 0 ? <IconCircleMinus/> : <IconLock/>}\r\n                  label=\"Withdraw\"\r\n                  onClick={() => {\r\n                    withdraw(\r\n                      BSDS.addr,\r\n                      toBaseUnitBN(withdrawAmount, BSD.decimals),\r\n                    );\r\n                  }}\r\n                  disabled={status === 1 || !isPos(withdrawAmount) || withdrawAmount.isGreaterThan(stagedBalance)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        :\r\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\r\n          {/* total Issued */}\r\n          <div style={{flexBasis: '30%'}}>\r\n            <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"BSD\"}/>\r\n          </div>\r\n          <div style={{flexBasis: '40%'}}/>\r\n          {/* Approve DAO to spend BSD */}\r\n          <div style={{flexBasis: '30%', paddingTop: '2%'}}>\r\n            <Button\r\n              wide\r\n              icon={<IconCirclePlus />}\r\n              label=\"Approve\"\r\n              onClick={() => {\r\n                approve(BSD.addr, BSDS.addr);\r\n              }}\r\n              disabled={user === ''}\r\n            />\r\n          </div>\r\n        </div>\r\n      }\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default WithdrawDeposit;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Box, Button, IconCirclePlus, IconCircleMinus, IconLock\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport styled from 'styled-components';\r\nimport {\r\n  BalanceBlock, MaxButton,\r\n} from '../common/index';\r\nimport { bond, unbondUnderlying } from '../../utils/web3';\r\nimport {isPos, toBaseUnitBN} from '../../utils/number';\r\nimport { BSD, BSDS } from \"../../constants/tokens\";\r\nimport BigNumberInput from \"../common/BigNumberInput\";\r\nimport TextBlock from \"../common/TextBlock\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype BondUnbondProps = {\r\n  staged: BigNumber,\r\n  bonded: BigNumber,\r\n  status: number,\r\n  lockup: number,\r\n};\r\n\r\nconst Container = styled(Box)`${BoxStyle}`;\r\n\r\nfunction BondUnbond({\r\n  staged, bonded, status, lockup\r\n}: BondUnbondProps) {\r\n  const [bondAmount, setBondAmount] = useState(new BigNumber(0));\r\n  const [unbondAmount, setUnbondAmount] = useState(new BigNumber(0));\r\n\r\n  return (\r\n    <Container heading=\"Bond\">\r\n      <div style={{display: 'flex', flexWrap: 'wrap'}}>\r\n        {/* Total bonded */}\r\n        <div style={{flexBasis: '16%'}}>\r\n          <BalanceBlock asset=\"Bonded\" balance={bonded} suffix={\"BSD\"}/>\r\n        </div>\r\n        {/* Total bonded */}\r\n        <div style={{flexBasis: '16%'}}>\r\n          <TextBlock label=\"Exit Lockup\" text={lockup == 0 ? \"\" : lockup == 1 ? \"1 epoch\" : `${lockup} epochs`}/>\r\n        </div>\r\n        {/* Bond BSD within DAO */}\r\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\r\n          <div style={{display: 'flex'}}>\r\n            <div style={{width: '60%', minWidth: '6em'}}>\r\n              <>\r\n                <BigNumberInput\r\n                  adornment=\"BSD\"\r\n                  value={bondAmount}\r\n                  setter={setBondAmount}\r\n                  disabled={status != 0}\r\n                />\r\n                <MaxButton\r\n                  onClick={() => {\r\n                    setBondAmount(staged);\r\n                  }}\r\n                />\r\n              </>\r\n            </div>\r\n            <div style={{width: '40%', minWidth: '7em'}}>\r\n              <Button\r\n                wide\r\n                icon={status === 0 ? <IconCirclePlus/> : <IconLock/>}\r\n                label=\"Bond\"\r\n                onClick={() => {\r\n                  bond(\r\n                    BSDS.addr,\r\n                    toBaseUnitBN(bondAmount, BSD.decimals),\r\n                  );\r\n                }}\r\n                disabled={status === 2 || !isPos(bondAmount) || bondAmount.isGreaterThan(staged)}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div style={{width: '2%'}}/>\r\n        {/* Unbond BSD within DAO */}\r\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\r\n          <div style={{display: 'flex'}}>\r\n            <div style={{width: '60%', minWidth: '6em'}}>\r\n              <>\r\n                <BigNumberInput\r\n                  adornment=\"BSD\"\r\n                  value={unbondAmount}\r\n                  setter={setUnbondAmount}\r\n                  disabled={status != 0}\r\n                />\r\n                <MaxButton\r\n                  onClick={() => {\r\n                    setUnbondAmount(bonded);\r\n                  }}\r\n                />\r\n              </>\r\n            </div>\r\n            <div style={{width: '40%', minWidth: '7em'}}>\r\n              <Button\r\n                wide\r\n                icon={status === 0 ? <IconCircleMinus/> : <IconLock/>}\r\n                label=\"Unbond\"\r\n                onClick={() => {\r\n                  unbondUnderlying(\r\n                    BSDS.addr,\r\n                    toBaseUnitBN(unbondAmount, BSD.decimals),\r\n                  );\r\n                }}\r\n                disabled={status === 2 || !isPos(unbondAmount) || unbondAmount.isGreaterThan(bonded)}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default BondUnbond;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport BigNumber from 'bignumber.js';\r\nimport {\r\n  getBalanceBonded,\r\n  getBalanceOfStaged, getFluidUntil, getLockedUntil,\r\n  getStatusOf, getTokenAllowance,\r\n  getTokenBalance, getTokenTotalSupply,\r\n} from '../../utils/infura';\r\nimport {BSD, BSDS} from \"../../constants/tokens\";\r\nimport { toTokenUnitsBN } from '../../utils/number';\r\n\r\nimport AccountPageHeader from \"./Header\";\r\nimport WithdrawDeposit from \"./WithdrawDeposit\";\r\nimport BondUnbond from \"./BondUnbond\";\r\nimport IconHeader from \"../common/IconHeader\";\r\nimport {getPoolAddress} from \"../../utils/pool\";\r\nimport {DollarPool4} from \"../../constants/contracts\";\r\nimport { DAO_EXIT_LOCKUP_EPOCHS } from '../../constants/values';\r\n\r\nfunction Wallet({ user }: {user: string}) {\r\n  // @ts-ignore\r\n  const { override } = useParams();\r\n  if (override) {\r\n    user = override;\r\n  }\r\n\r\n  const [userBSDBalance, setUserBSDBalance] = useState(new BigNumber(0));\r\n  const [userBSDAllowance, setUserBSDAllowance] = useState(new BigNumber(0));\r\n  const [userBSDSBalance, setUserBSDSBalance] = useState(new BigNumber(0));\r\n  const [totalBSDSSupply, setTotalBSDSSupply] = useState(new BigNumber(0));\r\n  const [userStagedBalance, setUserStagedBalance] = useState(new BigNumber(0));\r\n  const [userBondedBalance, setUserBondedBalance] = useState(new BigNumber(0));\r\n  const [userStatus, setUserStatus] = useState(0);\r\n  const [userStatusUnlocked, setUserStatusUnlocked] = useState(0);\r\n  const [lockup, setLockup] = useState(0);\r\n\r\n  //Update User balances\r\n  useEffect(() => {\r\n    if (user === '') {\r\n      setUserBSDBalance(new BigNumber(0));\r\n      setUserBSDAllowance(new BigNumber(0));\r\n      setUserBSDSBalance(new BigNumber(0));\r\n      setTotalBSDSSupply(new BigNumber(0));\r\n      setUserStagedBalance(new BigNumber(0));\r\n      setUserBondedBalance(new BigNumber(0));\r\n      setUserStatus(0);\r\n      return;\r\n    }\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [\r\n        esdBalance, esdAllowance, BSDSBalance, BSDSSupply, stagedBalance, bondedBalance, status, poolAddress,\r\n        fluidUntilStr, lockedUntilStr\r\n      ] = await Promise.all([\r\n        getTokenBalance(BSD.addr, user),\r\n        getTokenAllowance(BSD.addr, user, BSDS.addr),\r\n        getTokenBalance(BSDS.addr, user),\r\n        getTokenTotalSupply(BSDS.addr),\r\n        getBalanceOfStaged(BSDS.addr, user),\r\n        getBalanceBonded(BSDS.addr, user),\r\n        getStatusOf(BSDS.addr, user),\r\n        getPoolAddress(),\r\n\r\n        getFluidUntil(BSDS.addr, user),\r\n        getLockedUntil(BSDS.addr, user),\r\n      ]);\r\n\r\n      const userBSDBalance = toTokenUnitsBN(esdBalance, BSD.decimals);\r\n      const userBSDSBalance = toTokenUnitsBN(BSDSBalance, BSDS.decimals);\r\n      const totalBSDSSupply = toTokenUnitsBN(BSDSSupply, BSDS.decimals);\r\n      const userStagedBalance = toTokenUnitsBN(stagedBalance, BSDS.decimals);\r\n      const userBondedBalance = toTokenUnitsBN(bondedBalance, BSDS.decimals);\r\n      const userStatus = parseInt(status, 10);\r\n      const fluidUntil = parseInt(fluidUntilStr, 10);\r\n      const lockedUntil = parseInt(lockedUntilStr, 10);\r\n\r\n      if (!isCancelled) {\r\n        setUserBSDBalance(new BigNumber(userBSDBalance));\r\n        setUserBSDAllowance(new BigNumber(esdAllowance));\r\n        setUserBSDSBalance(new BigNumber(userBSDSBalance));\r\n        setTotalBSDSSupply(new BigNumber(totalBSDSSupply));\r\n        setUserStagedBalance(new BigNumber(userStagedBalance));\r\n        setUserBondedBalance(new BigNumber(userBondedBalance));\r\n        setUserStatus(userStatus);\r\n        setUserStatusUnlocked(Math.max(fluidUntil, lockedUntil))\r\n        setLockup(poolAddress == DollarPool4 ? DAO_EXIT_LOCKUP_EPOCHS : 1);\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n      <div style={{ color: 'rgba(255, 255, 255, 0.8)' }}>\r\n        <IconHeader icon={<i className=\"fas fa-dot-circle\"/>} text=\"DAO\"/>\r\n      </div>\r\n\r\n      <AccountPageHeader\r\n        accountBSDBalance={userBSDBalance}\r\n        accountBSDSBalance={userBSDSBalance}\r\n        totalBSDSSupply={totalBSDSSupply}\r\n        accountStagedBalance={userStagedBalance}\r\n        accountBondedBalance={userBondedBalance}\r\n        accountStatus={userStatus}\r\n        unlocked={userStatusUnlocked}\r\n      />\r\n\r\n      <WithdrawDeposit\r\n        user={user}\r\n        balance={userBSDBalance}\r\n        allowance={userBSDAllowance}\r\n        stagedBalance={userStagedBalance}\r\n        status={userStatus}\r\n      />\r\n\r\n      <BondUnbond\r\n        staged={userStagedBalance}\r\n        bonded={userBondedBalance}\r\n        status={userStatus}\r\n        lockup={lockup}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Wallet;\r\n","import React from 'react';\r\n\r\nimport BigNumber from 'bignumber.js';\r\n\r\ntype NumberBlockProps = {\r\n  title: string,\r\n  num: BigNumber | string | number\r\n}\r\n\r\nfunction NumberBlock({ title, num }: NumberBlockProps) {\r\n  const numNum = new BigNumber(num).toNumber();\r\n\r\n  return (\r\n    <>\r\n      <div style={{ fontSize: 14, padding: 3 }}>{title}</div>\r\n      <div style={{ fontSize: 24, padding: 3 }}>{numNum}</div>\r\n\r\n    </>\r\n  );\r\n}\r\n\r\nexport default NumberBlock;\r\n","import React from 'react';\r\nimport {\r\n  Box, Button, IconCirclePlus,\r\n} from '@aragon/ui';\r\nimport {advance} from '../../utils/web3';\r\nimport NumberBlock from \"../common/NumberBlock\";\r\nimport {BSDS} from \"../../constants/tokens\";\r\n\r\ntype AdvanceEpochProps = {\r\n  user: string,\r\n  epoch: number,\r\n  epochTime: number,\r\n}\r\n\r\nfunction AdvanceEpoch({\r\n  user,\r\n  epoch,\r\n  epochTime,\r\n}: AdvanceEpochProps) {\r\n  return (\r\n    <Box heading=\"Advance Epoch\">\r\n      <div style={{ display: 'flex' }}>\r\n        {/* Epoch Time */}\r\n        <div style={{ width: '30%' }}>\r\n          <NumberBlock title=\"Epoch (from current time)\" num={epochTime} />\r\n        </div>\r\n        {/* Advance Epoch */}\r\n        <div style={{ width: '40%' }}/>\r\n        <div style={{ width: '30%', paddingTop: '2%' }}>\r\n          <Button\r\n            wide\r\n            icon={<IconCirclePlus />}\r\n            label=\"Advance\"\r\n            onClick={() => {\r\n              advance(BSDS.addr);\r\n            }}\r\n            disabled={user === '' || epoch >= epochTime}\r\n          />\r\n        </div>\r\n      </div>\r\n    </Box>\r\n  );\r\n}\r\n\r\n\r\nexport default AdvanceEpoch;\r\n","import React from 'react';\r\n\r\nimport NumberBlock from \"../common/NumberBlock\";\r\nimport TextBlock from \"../common/TextBlock\";\r\n\r\ntype AccountPageHeaderProps = {\r\n  epoch: number,\r\n  epochTime: number,\r\n};\r\n\r\nconst EpochPageHeader = ({\r\n  epoch, epochTime,\r\n}: AccountPageHeaderProps) => (\r\n  <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\r\n    <div style={{ width: '25%' }}>\r\n      <NumberBlock title=\"Current\" num={epoch} />\r\n    </div>\r\n    <div style={{ width: '25%' }}>\r\n      <NumberBlock title=\"Available\" num={epochTime} />\r\n    </div>\r\n    <div style={{ width: '25%' }}>\r\n      <TextBlock label=\"Period\" text={epoch < 106 ? \"24 hours\" : \"8 hours\"}/>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n\r\nexport default EpochPageHeader;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Header } from '@aragon/ui';\r\n\r\nimport {getEpoch, getEpochTime,\r\n} from '../../utils/infura';\r\nimport {BSDS} from \"../../constants/tokens\";\r\nimport AdvanceEpoch from './AdvanceEpoch';\r\nimport EpochPageHeader from \"./Header\";\r\nimport IconHeader from \"../common/IconHeader\";\r\n\r\nfunction EpochDetail({ user }: {user: string}) {\r\n\r\n  const [epoch, setEpoch] = useState(0);\r\n  const [epochTime, setEpochTime] = useState(0);\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [epochStr, epochTimeStr] = await Promise.all([\r\n        getEpoch(BSDS.addr),\r\n        getEpochTime(BSDS.addr),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        setEpoch(parseInt(epochStr, 10));\r\n        setEpochTime(parseInt(epochTimeStr, 10));\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n      <IconHeader icon={<i className=\"fas fa-stream\"/>} text=\"Epoch\"/>\r\n\r\n      <EpochPageHeader\r\n        epoch={epoch}\r\n        epochTime={epochTime}\r\n      />\r\n\r\n      <Header primary=\"Advance Epoch\" />\r\n\r\n      <AdvanceEpoch\r\n        user={user}\r\n        epoch={epoch}\r\n        epochTime={epochTime}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EpochDetail;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport BigNumber from \"bignumber.js\";\r\nimport { BalanceBlock } from \"../common\";\r\nimport {ownership} from \"../../utils/number\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype CouponMarketHeaderProps = {\r\n  debt: BigNumber,\r\n  supply: BigNumber,\r\n  coupons: BigNumber,\r\n  premium: BigNumber,\r\n};\r\n\r\nconst Container = styled.div`${BoxStyle}`;\r\n\r\nconst CouponMarketHeader = ({\r\n  debt, supply, coupons, premium\r\n}: CouponMarketHeaderProps) => (\r\n  <Container style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\r\n    <div style={{ flexBasis: '25%' }}>\r\n      <BalanceBlock asset=\"Debt Ratio\" balance={ownership(debt, supply)} suffix={\"%\"}/>\r\n    </div>\r\n    <div style={{ flexBasis: '25%' }}>\r\n      <BalanceBlock asset=\"Total Debt\" balance={debt} suffix={\"BSD\"}/>\r\n    </div>\r\n    <div style={{ flexBasis: '25%' }}>\r\n      <BalanceBlock asset=\"Coupons\" balance={coupons} />\r\n    </div>\r\n    <div style={{ flexBasis: '25%' }}>\r\n      <BalanceBlock asset=\"Premium\" balance={premium.multipliedBy(100)} suffix={\"%\"}/>\r\n    </div>\r\n  </Container>\r\n);\r\n\r\n\r\nexport default CouponMarketHeader;\r\n","import React, { useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport {\r\n  Box, Button, IconCirclePlus, IconCircleMinus\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport {\r\n  BalanceBlock, MaxButton, PriceSection,\r\n} from '../common/index';\r\nimport {approve, purchaseCoupons} from '../../utils/web3';\r\n\r\nimport {isPos, toBaseUnitBN, toTokenUnitsBN} from '../../utils/number';\r\nimport {BSD, BSDS} from \"../../constants/tokens\";\r\nimport {MAX_UINT256} from \"../../constants/values\";\r\nimport {getCouponPremium} from \"../../utils/infura\";\r\nimport BigNumberInput from \"../common/BigNumberInput\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype PurchaseCouponsProps = {\r\n  user: string,\r\n  allowance: BigNumber,\r\n  balance: BigNumber,\r\n  debt: BigNumber,\r\n};\r\n\r\nconst Container = styled(Box)`${BoxStyle}`;\r\n\r\nfunction PurchaseCoupons({\r\n  user, balance, allowance, debt,\r\n}: PurchaseCouponsProps) {\r\n  const [purchaseAmount, setPurchaseAmount] = useState(new BigNumber(0));\r\n  const [premium, setPremium] = useState(new BigNumber(0));\r\n\r\n  const updatePremium = async (purchaseAmount) => {\r\n    if (purchaseAmount.lte(new BigNumber(0))) {\r\n      setPremium(new BigNumber(0));\r\n      return;\r\n    }\r\n    const purchaseAmountBase = toBaseUnitBN(purchaseAmount, BSD.decimals);\r\n    const premium = await getCouponPremium(BSDS.addr, purchaseAmountBase)\r\n    const premiumFormatted = toTokenUnitsBN(premium, BSD.decimals);\r\n    setPremium(premiumFormatted);\r\n  };\r\n\r\n  return (\r\n    <Container heading=\"Purchase\">\r\n      {allowance.comparedTo(MAX_UINT256) === 0 ?\r\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\r\n          {/* User balance */}\r\n          <div style={{flexBasis: '30%'}}>\r\n            <BalanceBlock asset={`Balance`} balance={balance} suffix={\" BSD\"}/>\r\n          </div>\r\n          <div style={{flexBasis: '38%'}}/>\r\n          {/* Purchase coupons */}\r\n          <div style={{flexBasis: '32%', paddingTop: '2%'}}>\r\n            <div style={{display: 'flex'}}>\r\n              <div style={{width: '60%', minWidth: '6em'}}>\r\n                <>\r\n                  <BigNumberInput\r\n                    adornment=\"BSD\"\r\n                    value={purchaseAmount}\r\n                    setter={(value) => {\r\n                      setPurchaseAmount(value);\r\n                      isPos(value) ? updatePremium(value) : updatePremium(new BigNumber(0));\r\n                    }}\r\n                  />\r\n                  <MaxButton\r\n                    onClick={() => {\r\n                      const maxPurchaseAmount = debt.comparedTo(balance) > 0 ? balance : debt\r\n                      setPurchaseAmount(maxPurchaseAmount);\r\n                      updatePremium(maxPurchaseAmount);\r\n                    }}\r\n                  />\r\n                </>\r\n              </div>\r\n              <div style={{width: '40%', minWidth: '6em'}}>\r\n                <Button\r\n                  wide\r\n                  icon={<IconCircleMinus/>}\r\n                  label=\"Burn\"\r\n                  onClick={() => {\r\n                    purchaseCoupons(\r\n                      BSDS.addr,\r\n                      toBaseUnitBN(purchaseAmount, BSD.decimals),\r\n                    );\r\n                  }}\r\n                  disabled={user === '' || debt.isZero() || balance.isZero() || !isPos(purchaseAmount)}\r\n                />\r\n              </div>\r\n            </div>\r\n            <PriceSection label=\"Coupons \" amt={purchaseAmount.plus(premium)}/>\r\n          </div>\r\n        </div>\r\n        :\r\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\r\n          {/* User balance */}\r\n          <div style={{flexBasis: '30%'}}>\r\n            <BalanceBlock asset={`BSD Balance`} balance={balance}/>\r\n          </div>\r\n          <div style={{flexBasis: '40%'}}/>\r\n          {/* Approve DAO to spend BSD */}\r\n          <div style={{flexBasis: '30%', paddingTop: '2%'}}>\r\n            <Button\r\n              wide\r\n              icon={<IconCirclePlus/>}\r\n              label=\"Unlock\"\r\n              onClick={() => {\r\n                approve(BSD.addr, BSDS.addr);\r\n              }}\r\n              disabled={user === ''}\r\n            />\r\n          </div>\r\n        </div>\r\n      }\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default PurchaseCoupons;\r\n","import React, {useEffect, useState} from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport {\r\n  DataView, Button, IconCirclePlus, Box\r\n} from '@aragon/ui';\r\n\r\nimport {getBatchBalanceOfCoupons, getBatchCouponsExpiration, getCouponEpochs} from '../../utils/infura';\r\nimport {BSD, BSDS} from \"../../constants/tokens\";\r\nimport {formatBN, toBaseUnitBN, toTokenUnitsBN} from \"../../utils/number\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport {redeemCoupons} from \"../../utils/web3\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype PurchaseHistoryProps = {\r\n  user: string,\r\n  hideRedeemed: boolean,\r\n  totalRedeemable: BigNumber\r\n};\r\n\r\nconst Container = styled(Box)`${BoxStyle}`;\r\n\r\nfunction PurchaseHistory({\r\n  user, hideRedeemed, totalRedeemable\r\n}: PurchaseHistoryProps) {\r\n  const history = useHistory();\r\n  const [epochs, setEpochs] = useState([]);\r\n  const [page, setPage] = useState(0)\r\n  const [initialized, setInitialized] = useState(false)\r\n\r\n  //Update User balances\r\n  useEffect(() => {\r\n    if (user === '') return;\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const epochsFromEvents = await getCouponEpochs(BSDS.addr, user);\r\n      const epochNumbers = epochsFromEvents.map(e => parseInt(e.epoch));\r\n      const balanceOfCoupons = await getBatchBalanceOfCoupons(BSDS.addr, user, epochNumbers);\r\n      const couponsExpirations = await getBatchCouponsExpiration(BSDS.addr, epochNumbers);\r\n\r\n      const couponEpochs = epochsFromEvents.map((epoch, i) => {\r\n        epoch.balance = new BigNumber(balanceOfCoupons[i]);\r\n        epoch.expiration = couponsExpirations[i];\r\n        return epoch;\r\n      });\r\n\r\n      if (!isCancelled) {\r\n        // @ts-ignore\r\n        setEpochs(couponEpochs);\r\n        setInitialized(true);\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user, totalRedeemable]);\r\n\r\n  return (\r\n    <Container>\r\n      <DataView\r\n        fields={['Epoch', 'Purchased', 'Balance', 'Expires', '']}\r\n        status={ initialized ? 'default' : 'loading' }\r\n        // @ts-ignore\r\n        entries={hideRedeemed ? epochs.filter((epoch) => !epoch.balance.isZero()) : epochs}\r\n        entriesPerPage={10}\r\n        page={page}\r\n        onPageChange={setPage}\r\n        renderEntry={(epoch) => [\r\n          epoch.epoch.toString(),\r\n          formatBN(toTokenUnitsBN(epoch.coupons, BSD.decimals), 2),\r\n          formatBN(toTokenUnitsBN(epoch.balance, BSD.decimals), 2),\r\n          epoch.expiration.toString(),\r\n          <Button\r\n            icon={<IconCirclePlus />}\r\n            label=\"Redeem\"\r\n            onClick={() => redeemCoupons(\r\n              BSDS.addr,\r\n              epoch.epoch,\r\n              toBaseUnitBN(\r\n                epoch.balance.isGreaterThan(totalRedeemable) ? totalRedeemable : epoch.balance,\r\n                BSD.decimals\r\n              ),\r\n            )}\r\n            disabled={epoch.balance.isZero()}\r\n          />\r\n        ]}\r\n      />\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default PurchaseHistory;\r\n","import React, { useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Header, Modal, Button, useTheme } from '@aragon/ui';\r\nimport { getPreference, storePreference } from \"../../utils/storage\";\r\nimport { COUPON_EXPIRATION } from \"../../constants/values\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\nconst Btn = styled(Button)`${BoxStyle} border: 4px solid #6f77e3;`\r\n\r\nfunction ModalWarning() {\r\n  const storedShowWarning = getPreference('showCouponWarning', '1');\r\n  const [showWarning, setShowWarning] = useState(storedShowWarning === '1');\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Modal visible={showWarning} closeButton={false} className=\"custom-modal\">\r\n      <div style={{ width: '100%' }}>\r\n        <div style={{ fontSize: 24, padding: 3, color: '#002884' }}>\r\n          Warning\r\n        </div>\r\n\r\n        <div style={{\r\n          marginLeft: '3%',\r\n          fontSize: 16,\r\n          padding: 5\r\n        }}>\r\n          <div>\r\n            By purchasing coupons the buyer incurs significant risk of loss.\r\n            Coupons will only become redeemable during the next supply\r\n            expansion. Each expansionary epoch, a trache of rewards are\r\n            reserved for coupon redemptions by the DAO. At that time, the\r\n            redemption process is first come, first served. Coupon redemption\r\n            is not guaranteed.\r\n          </div>\r\n\r\n          <div style={{\r\n            padding: 10,\r\n            textAlign: 'center',\r\n            color: '#002884'\r\n          }}>\r\n            Coupons will expire worthless if not redeemed\r\n            within {COUPON_EXPIRATION} epochs.\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ textAlign: 'right' }}>\r\n          <Btn\r\n            label={'I understand'}\r\n            onClick={() => {\r\n              storePreference('showCouponWarning', '0');\r\n              setShowWarning(false);\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default ModalWarning;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { Header as UIHeader } from '@aragon/ui';\r\n\r\ninterface Props {\r\n  primary: string;\r\n}\r\n\r\nconst HeaderWrapper = styled(UIHeader)`\r\n  h1 {\r\n    color: rgba(255, 255, 255, 0.8) !important;\r\n  }\r\n`;\r\n\r\nfunction Header({ primary }: Props): React.ReactElement {\r\n  return (\r\n    <HeaderWrapper primary={primary} />\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport {\r\n  getCouponPremium,\r\n  getTokenAllowance,\r\n  getTokenBalance,\r\n  getTokenTotalSupply, getTotalCoupons,\r\n  getTotalDebt, getTotalRedeemable,\r\n} from '../../utils/infura';\r\nimport {BSD, BSDS} from \"../../constants/tokens\";\r\nimport CouponMarketHeader from \"./Header\";\r\nimport {toTokenUnitsBN} from \"../../utils/number\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport PurchaseCoupons from \"./PurchaseCoupons\";\r\nimport PurchaseHistory from \"./PurchaseHistory\";\r\nimport ModalWarning from \"./ModalWarning\";\r\nimport IconHeader from \"../common/IconHeader\";\r\nimport {getPreference, storePreference} from \"../../utils/storage\";\r\nimport {CheckBox} from \"../common\";\r\nimport Header from '../common/Header';\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\nconst ONE_COUPON = new BigNumber(10).pow(18);\r\nconst Container = styled.div`${BoxStyle} margin-bottom: 32px;`;\r\n\r\nfunction CouponMarket({ user }: {user: string}) {\r\n  const { override } = useParams();\r\n  if (override) {\r\n    user = override;\r\n  }\r\n\r\n  const storedHideRedeemed = getPreference('hideRedeemedCoupons', '0');\r\n\r\n  const [balance, setBalance] = useState(new BigNumber(0));\r\n  const [allowance, setAllowance] = useState(new BigNumber(0));\r\n  const [supply, setSupply] = useState(new BigNumber(0));\r\n  const [coupons, setCoupons] = useState(new BigNumber(0));\r\n  const [redeemable, setRedeemable] = useState(new BigNumber(0));\r\n  const [couponPremium, setCouponPremium] = useState(new BigNumber(0));\r\n  const [debt, setDebt] = useState(new BigNumber(0));\r\n  const [hideRedeemed, setHideRedeemed] = useState(storedHideRedeemed === '1');\r\n\r\n  useEffect(() => {\r\n    if (user === '') {\r\n      setBalance(new BigNumber(0));\r\n      setAllowance(new BigNumber(0));\r\n      return;\r\n    }\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [balanceStr, allowanceStr] = await Promise.all([\r\n        getTokenBalance(BSD.addr, user),\r\n        getTokenAllowance(BSD.addr, user, BSDS.addr),\r\n      ]);\r\n\r\n      const userBalance = toTokenUnitsBN(balanceStr, BSD.decimals);\r\n\r\n      if (!isCancelled) {\r\n        setBalance(new BigNumber(userBalance));\r\n        setAllowance(new BigNumber(allowanceStr));\r\n        (new BigNumber(allowanceStr));\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [supplyStr, debtStr, couponsStr, redeemableStr] = await Promise.all([\r\n        getTokenTotalSupply(BSD.addr),\r\n        getTotalDebt(BSDS.addr),\r\n        getTotalCoupons(BSDS.addr),\r\n        getTotalRedeemable(BSDS.addr),\r\n      ]);\r\n\r\n      const totalSupply = toTokenUnitsBN(supplyStr, BSD.decimals);\r\n      const totalDebt = toTokenUnitsBN(debtStr, BSD.decimals);\r\n      const totalCoupons = toTokenUnitsBN(couponsStr, BSD.decimals);\r\n      const totalRedeemable = toTokenUnitsBN(redeemableStr, BSD.decimals);\r\n\r\n      if (!isCancelled) {\r\n        setSupply(new BigNumber(totalSupply));\r\n        setDebt(new BigNumber(totalDebt));\r\n        setCoupons(new BigNumber(totalCoupons));\r\n        setRedeemable(new BigNumber(totalRedeemable));\r\n\r\n        if (totalDebt.isGreaterThan(new BigNumber(1))) {\r\n          const couponPremiumStr = await getCouponPremium(BSDS.addr, ONE_COUPON)\r\n          setCouponPremium(toTokenUnitsBN(couponPremiumStr, BSD.decimals));\r\n        } else {\r\n          setCouponPremium(new BigNumber(0));\r\n        }\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n      <ModalWarning/>\r\n      <div style={{ color: 'rgba(255, 255, 255, 0.8)' }}>\r\n        <IconHeader icon={<i className=\"fas fa-ticket-alt\"/>} text=\"Coupon Market\"/>\r\n      </div>\r\n\r\n      <CouponMarketHeader\r\n        debt={debt}\r\n        supply={supply}\r\n        coupons={coupons}\r\n        premium={couponPremium}\r\n      />\r\n\r\n      <Header primary=\"Purchase\" />\r\n\r\n      <PurchaseCoupons\r\n        user={user}\r\n        allowance={allowance}\r\n        balance={balance}\r\n        debt={debt}\r\n      />\r\n\r\n      <Container style={{ display: 'flex' }}>\r\n        <Header primary=\"Coupons\" />\r\n        <div style={{ marginLeft: 'auto', alignSelf: 'flex-end' }}>\r\n          <CheckBox\r\n            text=\"Hide Redeemed\"\r\n            onCheck={(checked) => {\r\n              storePreference('hideRedeemedCoupons', checked ? '1' : '0');\r\n              setHideRedeemed(checked);\r\n            }}\r\n            checked={hideRedeemed}\r\n          />\r\n        </div>\r\n      </Container>\r\n\r\n      <PurchaseHistory\r\n        user={user}\r\n        hideRedeemed={hideRedeemed}\r\n        totalRedeemable={redeemable}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CouponMarket;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport BigNumber from \"bignumber.js\";\r\nimport {AddressBlock, BalanceBlock} from \"../common\";\r\nimport TextBlock from \"../common/TextBlock\";\r\nimport {ownership} from \"../../utils/number\";\r\nimport {GOVERNANCE_PROPOSAL_THRESHOLD} from \"../../constants/values\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype GovernanceHeaderProps = {\r\n  stake: BigNumber,\r\n  totalStake: BigNumber,\r\n  accountStatus: number,\r\n  implementation: string\r\n};\r\nconst Container = styled.div`${BoxStyle}`;\r\nconst STATUS_MAP = [\"Frozen\", \"Fluid\", \"Locked\"];\r\n\r\nconst GovernanceHeader = ({\r\n  stake, totalStake, accountStatus, implementation\r\n}: GovernanceHeaderProps) => (\r\n  <Container style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\r\n    <div style={{ flexBasis: '25%' }}>\r\n      <BalanceBlock asset=\"DAO Ownership\" balance={ownership(stake, totalStake)} suffix=\"%\" />\r\n    </div>\r\n    <div style={{ flexBasis: '25%' }}>\r\n      <BalanceBlock asset=\"Proposal Threshold\" balance={GOVERNANCE_PROPOSAL_THRESHOLD.multipliedBy(100)} suffix=\"%\" />\r\n    </div>\r\n    <div style={{ flexBasis: '25%' }}>\r\n      <TextBlock label=\"Status\" text={STATUS_MAP[accountStatus]}/>\r\n    </div>\r\n    <div style={{ flexBasis: '25%' }}>\r\n      <AddressBlock label=\"Implementation\" address={implementation} />\r\n    </div>\r\n  </Container>\r\n);\r\n\r\n\r\nexport default GovernanceHeader;\r\n","import {GOVERNANCE_PROPOSAL_THRESHOLD, GOVERNANCE_QUORUM} from \"../constants/values\";\r\nimport BigNumber from \"bignumber.js\";\r\n\r\nexport function proposalStatus(epoch, start, period, initialized, approve, reject, total): string {\r\n  if (start === 0) {\r\n    return \"N/A\";\r\n  }\r\n  if (epoch < start) {\r\n    return \"Unknown\";\r\n  }\r\n  if (epoch < (start + period)) {\r\n    return \"Voting\"\r\n  }\r\n  if (initialized) {\r\n    return \"Committed\"\r\n  }\r\n\r\n  if (epoch < (start + period)) {\r\n    return \"Rejected\"; // Not ended\r\n  }\r\n  if (approve.plus(reject).dividedBy(total).comparedTo(GOVERNANCE_QUORUM) < 0) {\r\n    return \"Rejected\"; // Didn't meet quorum\r\n  }\r\n  return approve.comparedTo(reject) > 0 ? \"Approved\" : \"Rejected\";\r\n}\r\n\r\nexport function canPropose(stake: BigNumber, totalStake: BigNumber): boolean {\r\n  return stake.div(totalStake).comparedTo(GOVERNANCE_PROPOSAL_THRESHOLD) >= 0;\r\n}","import React, { useState } from 'react';\r\nimport {\r\n  Box, TextInput, Button, IconToken,\r\n} from '@aragon/ui';\r\nimport styled from 'styled-components';\r\nimport BigNumber from 'bignumber.js';\r\nimport {recordVote} from '../../utils/web3';\r\n\r\nimport {BSDS} from \"../../constants/tokens\";\r\nimport {canPropose} from \"../../utils/gov\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\nconst Container = styled(Box)`${BoxStyle}`;\r\n\r\ntype ProposeCandidateProps = {\r\n  user: string,\r\n  stake: BigNumber,\r\n  totalStake: BigNumber,\r\n  accountStatus: number\r\n};\r\n\r\nfunction plausibleCandidate(candidate: string): boolean {\r\n  return (/^(0x)[0-9a-fA-F]{40}$/i.test(candidate));\r\n}\r\n\r\nfunction ProposeCandidate({\r\n  user, stake, totalStake, accountStatus,\r\n}: ProposeCandidateProps) {\r\n  const [candidate, setCandidate] = useState(\"0x\");\r\n\r\n  return (\r\n    <Container heading=\"Propose\">\r\n      <div style={{display: 'flex', flexWrap: 'wrap'}}>\r\n        {/* User balance */}\r\n        <div style={{flexBasis: '62%', paddingTop: '2%'}}>\r\n          <>\r\n            <TextInput\r\n              wide\r\n              value={candidate}\r\n              onChange={(event) => {\r\n                if (event.target.value) {\r\n                  setCandidate(event.target.value);\r\n                } else {\r\n                  setCandidate(\"0x\");\r\n                }\r\n              }}\r\n            />\r\n          </>\r\n        </div>\r\n        <div style={{flexBasis: '6%'}}/>\r\n        {/* Purchase coupons */}\r\n        <div style={{flexBasis: '32%', paddingTop: '2%'}}>\r\n          <Button\r\n            wide\r\n            icon={<IconToken/>}\r\n            label=\"Propose\"\r\n            onClick={() => {\r\n              recordVote(\r\n                BSDS.addr,\r\n                candidate,\r\n                1 // APPROVE\r\n              );\r\n            }}\r\n            disabled={user === '' || !canPropose(stake, totalStake) || !plausibleCandidate(candidate) || accountStatus === 1}\r\n          />\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default ProposeCandidate;\r\n","import React, {useEffect, useState} from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport {\r\n  Button, IconRight, DataView, Box\r\n} from '@aragon/ui';\r\n\r\nimport {\r\n  getAllProposals,\r\n  getApproveFor,\r\n  getEpoch,\r\n  getIsInitialized,\r\n  getRejectFor,\r\n  getTokenTotalSupply, getTotalBonded, getTotalBondedAt\r\n} from '../../utils/infura';\r\nimport {BSDS} from \"../../constants/tokens\";\r\nimport {AddressBlock} from \"../common\";\r\nimport {proposalStatus} from \"../../utils/gov\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\nconst DataComponent = styled(Box)`${BoxStyle}`;\r\n\r\ntype CandidateHistoryProps = {\r\n  user: string;\r\n};\r\n\r\ntype Proposal = {\r\n  index: number\r\n  candidate: string,\r\n  account: string,\r\n  start: number,\r\n  period: number,\r\n  status: string\r\n}\r\n\r\nasync function formatProposals(epoch: number, proposals: any[]): Promise<Proposal[]> {\r\n  const currentTotalStake = await getTokenTotalSupply(BSDS.addr);\r\n  const initializeds = await Promise.all(proposals.map((p) => getIsInitialized(BSDS.addr, p.candidate)));\r\n  const approves = await Promise.all(proposals.map((p) => getApproveFor(BSDS.addr, p.candidate)));\r\n  const rejecteds = await Promise.all(proposals.map((p) => getRejectFor(BSDS.addr, p.candidate)));\r\n  const supplyAts = await Promise.all(proposals.map(async (p) => {\r\n    const at = (p.start + p.period - 1);\r\n    if (epoch > at) {\r\n      return await getTotalBondedAt(BSDS.addr, at);\r\n    }\r\n    return currentTotalStake;\r\n  }));\r\n\r\n  for (let i = 0; i < proposals.length; i++) {\r\n    proposals[i].index = (proposals.length - i);\r\n    proposals[i].start = parseInt(proposals[i].start);\r\n    proposals[i].period = parseInt(proposals[i].period);\r\n    proposals[i].status = proposalStatus(\r\n      epoch,\r\n      proposals[i].start,\r\n      proposals[i].period,\r\n      initializeds[i],\r\n      new BigNumber(approves[i]),\r\n      new BigNumber(rejecteds[i]),\r\n      new BigNumber(supplyAts[i])\r\n    );\r\n  }\r\n  return proposals\r\n}\r\n\r\nfunction CandidateHistory({user}: CandidateHistoryProps) {\r\n  const history = useHistory();\r\n  const [proposals, setProposals] = useState<Proposal[]>([]);\r\n  const [page, setPage] = useState(0)\r\n  const [initialized, setInitialized] = useState(false)\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [epochStr, allProposals] = await Promise.all([\r\n        getEpoch(BSDS.addr),\r\n        getAllProposals(BSDS.addr),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        const formattedProposals = await formatProposals(parseInt(epochStr), allProposals);\r\n        setProposals(formattedProposals);\r\n        setInitialized(true);\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <DataComponent>\r\n      <DataView\r\n        fields={['Proposal', 'Candidate', 'Proposed', 'Complete', 'Proposer', 'Status', '']}\r\n        status={ initialized ? 'default' : 'loading' }\r\n        // @ts-ignore\r\n        entries={proposals}\r\n        entriesPerPage={10}\r\n        page={page}\r\n        onPageChange={setPage}\r\n        renderEntry={(proposal) => [\r\n          \"#\" + proposal.index,\r\n          <AddressBlock label=\"\" address={proposal.candidate} />,\r\n          proposal.start.toString(),\r\n          (proposal.start + proposal.period).toString(),\r\n          <AddressBlock label=\"\" address={proposal.account} />,\r\n          proposal.status,\r\n          <Button\r\n            wide\r\n            icon={<IconRight />}\r\n            label=\"Go To\"\r\n            onClick={() => {\r\n              history.push(`/governance/candidate/${proposal.candidate}`);\r\n            }}\r\n          />\r\n        ]}\r\n      />\r\n    </DataComponent>\r\n  );\r\n}\r\n\r\nexport default CandidateHistory;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport {\r\n  getImplementation,\r\n  getStatusOf,\r\n  getTokenBalance,\r\n  getTokenTotalSupply,\r\n} from '../../utils/infura';\r\nimport {BSDS} from \"../../constants/tokens\";\r\nimport {toTokenUnitsBN} from \"../../utils/number\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport GovernanceHeader from \"./Header\";\r\nimport ProposeCandidate from \"./ProposeCandidate\";\r\nimport CandidateHistory from \"./CandidateHistory\";\r\nimport IconHeader from \"../common/IconHeader\";\r\nimport {canPropose} from \"../../utils/gov\";\r\nimport Header from '../common/Header';\r\n\r\nfunction Governance({ user }: {user: string}) {\r\n\r\n  const [stake, setStake] = useState(new BigNumber(0));\r\n  const [totalStake, setTotalStake] = useState(new BigNumber(0));\r\n  const [userStatus, setUserStatus] = useState(0);\r\n  const [implementation, setImplementation] = useState(\"0x\");\r\n\r\n  useEffect(() => {\r\n    if (user === '') {\r\n      setStake(new BigNumber(0));\r\n      setUserStatus(0);\r\n      return;\r\n    }\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [statusStr, stakeStr] = await Promise.all([\r\n        getStatusOf(BSDS.addr, user),\r\n        getTokenBalance(BSDS.addr, user),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        setStake(toTokenUnitsBN(stakeStr, BSDS.decimals));\r\n        setUserStatus(parseInt(statusStr, 10));\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [totalStakeStr, implementationStr] = await Promise.all([\r\n        getTokenTotalSupply(BSDS.addr),\r\n        getImplementation(BSDS.addr),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        setTotalStake(toTokenUnitsBN(totalStakeStr, BSDS.decimals));\r\n        setImplementation(implementationStr)\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n      <div style={{ color: 'rgba(255, 255, 255, 0.8)' }}>\r\n        <IconHeader icon={<i className=\"fas fa-poll\"/>} text=\"Governance\"/>\r\n      </div>\r\n\r\n      <GovernanceHeader\r\n        stake={stake}\r\n        totalStake={totalStake}\r\n        accountStatus={userStatus}\r\n        implementation={implementation}\r\n      />\r\n\r\n      {\r\n        canPropose(stake, totalStake) ?\r\n          <>\r\n            <Header primary=\"Propose Candidate\"/>\r\n            <ProposeCandidate\r\n              user={user}\r\n              stake={stake}\r\n              totalStake={totalStake}\r\n              accountStatus={userStatus}\r\n            />\r\n          </>\r\n          :\r\n          ''\r\n      }\r\n\r\n      <Header primary=\"Candidate History\" />\r\n\r\n      <CandidateHistory user={user}/>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Governance;\r\n","import React from 'react';\r\nimport {\r\n  Box, Button, IconRotateLeft, IconCircleCheck, IconProhibited\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport styled from 'styled-components';\r\nimport {\r\n  BalanceBlock,\r\n} from '../common/index';\r\nimport {recordVote} from '../../utils/web3';\r\n\r\nimport {BSDS} from \"../../constants/tokens\";\r\nimport TextBlock from \"../common/TextBlock\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype VoteProps = {\r\n  candidate: string,\r\n  stake: BigNumber,\r\n  vote: number,\r\n  status: number\r\n};\r\n\r\nconst VOTE_TYPE_MAP = [\"Undecided\", \"Approve\", \"Reject\"]\r\nconst Container = styled(Box)`${BoxStyle}`;\r\n\r\nfunction Vote({\r\n  candidate, stake, vote, status\r\n}: VoteProps) {\r\n  return (\r\n    <Container heading=\"Vote\">\r\n      <div style={{display: 'flex'}}>\r\n        {/* User stake */}\r\n        <div style={{width: '20%'}}>\r\n          <BalanceBlock asset=\"My Stake\" balance={stake} suffix={ \"BSDS\"}/>\r\n        </div>\r\n        <div style={{width: '20%'}}>\r\n          <TextBlock label=\"My Vote\" text={VOTE_TYPE_MAP[vote]}/>\r\n        </div>\r\n        {/* Remove vote for candidate */}\r\n        <div style={{width: '18%', paddingTop: '2%'}}>\r\n          <Button\r\n            wide\r\n            icon={<IconRotateLeft/>}\r\n            label=\"Unvote\"\r\n            onClick={() => {\r\n              recordVote(\r\n                BSDS.addr,\r\n                candidate,\r\n                0 // UNDECIDED\r\n              );\r\n            }}\r\n            disabled={status === 1 || vote === 0 || stake.isZero()}\r\n          />\r\n        </div>\r\n        {/* Vote to approve candidate */}\r\n        <div style={{width: '3%'}} />\r\n        <div style={{width: '18%', paddingTop: '2%'}}>\r\n          <Button\r\n            wide\r\n            icon={<IconCircleCheck/>}\r\n            label=\"Accept\"\r\n            onClick={() => {\r\n              recordVote(\r\n                BSDS.addr,\r\n                candidate,\r\n                1 // APPROVE\r\n              );\r\n            }}\r\n            disabled={status === 1 || vote === 1 || stake.isZero()}\r\n          />\r\n        </div>\r\n        {/* Vote to reject candidate */}\r\n        <div style={{width: '3%'}} />\r\n        <div style={{width: '18%', paddingTop: '2%'}}>\r\n          <div style={{display: 'flex'}}>\r\n              <Button\r\n                wide\r\n                icon={<IconProhibited/>}\r\n                label=\"Reject\"\r\n                onClick={() => {\r\n                  recordVote(\r\n                    BSDS.addr,\r\n                    candidate,\r\n                    2 // REJECT\r\n                  );\r\n                }}\r\n                disabled={status === 1 || vote === 2 || stake.isZero()}\r\n              />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Vote;\r\n","import React from 'react';\r\n\r\nimport BigNumber from \"bignumber.js\";\r\nimport { BalanceBlock } from \"../common\";\r\n\r\ntype VoteHeaderProps = {\r\n  approveFor: BigNumber,\r\n  rejectFor: BigNumber,\r\n  totalStake: BigNumber,\r\n  showParticipation: boolean,\r\n};\r\n\r\nfunction approval(approve: BigNumber, reject: BigNumber): BigNumber {\r\n  return approve.multipliedBy(10000).dividedToIntegerBy(approve.plus(reject)).dividedBy(100)\r\n}\r\n\r\nfunction participation(approve: BigNumber, reject: BigNumber, totalStake: BigNumber): BigNumber {\r\n  return approve.plus(reject).multipliedBy(10000).dividedToIntegerBy(totalStake).dividedBy(100)\r\n}\r\n\r\nconst VoteHeader = ({\r\n  approveFor, rejectFor, totalStake, showParticipation\r\n}: VoteHeaderProps) => (\r\n  <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\r\n    <div style={{ width: '25%' }}>\r\n      <BalanceBlock asset=\"Approve\" balance={approveFor} suffix={ \"BSDS\"}/>\r\n    </div>\r\n    <div style={{ width: '25%' }}>\r\n      <BalanceBlock asset=\"Reject\" balance={rejectFor} suffix={ \"BSDS\"}/>\r\n    </div>\r\n    <div style={{ width: '25%' }}>\r\n      <BalanceBlock asset=\"Approval\" balance={approval(approveFor, rejectFor)} suffix=\"%\" />\r\n    </div>\r\n    {showParticipation ?\r\n      <div style={{width: '25%'}}>\r\n        <BalanceBlock asset=\"Participation\" balance={participation(approveFor, rejectFor, totalStake)} suffix=\"%\"/>\r\n      </div> : ''\r\n    }\r\n  </div>\r\n);\r\n\r\n\r\nexport default VoteHeader;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport BoxStyle from '../common/BoxStyle';\r\nimport NumberBlock from \"../common/NumberBlock\";\r\n\r\ntype CommitHeaderProps = {\r\n  epoch: number\r\n  startEpoch: number,\r\n  periodEpoch: number,\r\n};\r\n\r\nconst Container = styled.div`${BoxStyle}`;\r\n\r\nconst CommitHeader = ({\r\n   epoch, startEpoch, periodEpoch,\r\n}: CommitHeaderProps) => (\r\n  <Container style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\r\n    <div style={{ width: '25%' }}>\r\n      <NumberBlock title=\"Epoch\" num={epoch} />\r\n    </div>\r\n    <div style={{ width: '25%' }}>\r\n      <NumberBlock title=\"Starts\" num={startEpoch} />\r\n    </div>\r\n    <div style={{ width: '25%' }}>\r\n      <NumberBlock title=\"Period\" num={periodEpoch} />\r\n    </div>\r\n  </Container>\r\n);\r\n\r\n\r\nexport default CommitHeader;\r\n","import React from 'react';\r\nimport {\r\n  Box, Button, IconUpload\r\n} from '@aragon/ui';\r\nimport styled from 'styled-components';\r\nimport TextBlock from \"../common/TextBlock\";\r\nimport {BSDS} from \"../../constants/tokens\";\r\nimport {commit} from \"../../utils/web3\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype CommitProps = {\r\n  user: string,\r\n  candidate: string,\r\n  epoch: number\r\n  startEpoch: number,\r\n  periodEpoch: number,\r\n  initialized: boolean,\r\n  approved: boolean\r\n};\r\n\r\nconst Container = styled(Box)`${BoxStyle}`;\r\n\r\nfunction Commit({\r\n  user, candidate, epoch, startEpoch, periodEpoch, initialized, approved,\r\n}: CommitProps) {\r\n  function status(epoch, startEpoch, periodEpoch, initialized, approved): string {\r\n    if (startEpoch === 0) {\r\n      return \"N/A\";\r\n    }\r\n    if (epoch < startEpoch) {\r\n      return \"Unknown\";\r\n    }\r\n    if (epoch < (startEpoch + periodEpoch)) {\r\n      return \"Voting\"\r\n    }\r\n    if (initialized) {\r\n      return \"Committed\"\r\n    }\r\n    if (approved) {\r\n      return \"Approved\"\r\n    }\r\n    return \"Rejected\"\r\n  }\r\n  const s = status(epoch, startEpoch, periodEpoch, initialized, approved);\r\n\r\n  return (\r\n    <Container heading=\"Commit\">\r\n      <div style={{display: 'flex'}}>\r\n        {/* Status */}\r\n        <div style={{ width: '30%' }}>\r\n          <TextBlock label=\"Status\" text={s} />\r\n        </div>\r\n        <div style={{width: '40%'}} />\r\n        {/* Commit candidate */}\r\n        <div style={{width: '30%', paddingTop: '2%'}}>\r\n          <div style={{display: 'flex'}}>\r\n              <Button\r\n                wide\r\n                icon={<IconUpload/>}\r\n                label=\"Commit\"\r\n                onClick={() => {\r\n                  commit(\r\n                    BSDS.addr,\r\n                    candidate\r\n                  );\r\n                }}\r\n                disabled={user === '' || s !== 'Approved'}\r\n              />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Commit;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Header, IdentityBadge } from '@aragon/ui';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport {\r\n  getApproveFor, getEpoch, getIsInitialized, getPeriodFor,\r\n  getRecordedVote,\r\n  getRejectFor, getStartFor, getStatusOf,\r\n  getTokenBalance,\r\n  getTokenTotalSupply, getTotalBondedAt\r\n} from '../../utils/infura';\r\nimport {BSDS} from \"../../constants/tokens\";\r\nimport {toTokenUnitsBN} from \"../../utils/number\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport Vote from \"./Vote\";\r\nimport VoteHeader from \"./VoteHeader\";\r\nimport CommitHeader from \"./CommitHeader\";\r\nimport Commit from \"./Commit\";\r\nimport IconHeader from \"../common/IconHeader\";\r\nimport {proposalStatus} from \"../../utils/gov\";\r\n\r\nfunction Candidate({ user }: {user: string}) {\r\n  const { candidate } = useParams();\r\n\r\n  const [approveFor, setApproveFor] = useState(new BigNumber(0));\r\n  const [rejectFor, setRejectFor] = useState(new BigNumber(0));\r\n  const [totalStake, setTotalStake] = useState(new BigNumber(0));\r\n  const [vote, setVote] = useState(0);\r\n  const [status, setStatus] = useState(0);\r\n  const [userStake, setUserStake] = useState(new BigNumber(0));\r\n  const [epoch, setEpoch] = useState(0);\r\n  const [startEpoch, setStartEpoch] = useState(0);\r\n  const [periodEpoch, setPeriodEpoch] = useState(0);\r\n  const [initialized, setInitialized] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (user === '') {\r\n      setVote(0);\r\n      setStatus(0);\r\n      setUserStake(new BigNumber(0));\r\n      return;\r\n    }\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [\r\n        voteStr, statusStr, userStakeStr,\r\n      ] = await Promise.all([\r\n        getRecordedVote(BSDS.addr, user, candidate),\r\n        getStatusOf(BSDS.addr, user),\r\n        getTokenBalance(BSDS.addr, user),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        setVote(parseInt(voteStr, 10));\r\n        setStatus(parseInt(statusStr, 10));\r\n        setUserStake(toTokenUnitsBN(userStakeStr, BSDS.decimals));\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user, candidate]);\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      let [\r\n        approveForStr, rejectForStr, totalStakeStr,\r\n        epochStr, startForStr, periodForStr, isInitialized\r\n      ] = await Promise.all([\r\n        getApproveFor(BSDS.addr, candidate),\r\n        getRejectFor(BSDS.addr, candidate),\r\n        getTokenTotalSupply(BSDS.addr),\r\n        getEpoch(BSDS.addr),\r\n        getStartFor(BSDS.addr, candidate),\r\n        getPeriodFor(BSDS.addr, candidate),\r\n        getIsInitialized(BSDS.addr, candidate),\r\n      ]);\r\n\r\n      const epochN = parseInt(epochStr, 10);\r\n      const startN = parseInt(startForStr, 10);\r\n      const periodN = parseInt(periodForStr, 10);\r\n\r\n      const endsAfter = (startN + periodN - 1);\r\n      if (epochN > endsAfter) {\r\n        totalStakeStr = await getTotalBondedAt(BSDS.addr, endsAfter);\r\n      }\r\n\r\n      if (!isCancelled) {\r\n        setApproveFor(toTokenUnitsBN(approveForStr, BSDS.decimals));\r\n        setRejectFor(toTokenUnitsBN(rejectForStr, BSDS.decimals));\r\n        setTotalStake(toTokenUnitsBN(totalStakeStr, BSDS.decimals));\r\n        setEpoch(epochN);\r\n        setStartEpoch(startN);\r\n        setPeriodEpoch(periodN);\r\n        setInitialized(isInitialized);\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [candidate]);\r\n\r\n  return (\r\n    <>\r\n      <IconHeader icon={<i className=\"fas fa-poll\"/>} text=\"Candidate\"/>\r\n      <IdentityBadge entity={candidate} shorten={false} />\r\n\r\n      <VoteHeader\r\n        approveFor={approveFor}\r\n        rejectFor={rejectFor}\r\n        totalStake={totalStake}\r\n        showParticipation={startEpoch > 106}\r\n      />\r\n\r\n      <Header primary=\"Vote\" />\r\n      <Vote\r\n        candidate={candidate}\r\n        stake={userStake}\r\n        vote={vote}\r\n        status={status}\r\n      />\r\n\r\n      <Header primary=\"Commit\" />\r\n      <CommitHeader\r\n        epoch={epoch}\r\n        startEpoch={startEpoch}\r\n        periodEpoch={periodEpoch}\r\n      />\r\n\r\n      <Commit\r\n        user={user}\r\n        candidate={candidate}\r\n        epoch={epoch}\r\n        startEpoch={startEpoch}\r\n        periodEpoch={periodEpoch}\r\n        initialized={initialized}\r\n        approved={proposalStatus(epoch, startEpoch, periodEpoch, false, approveFor, rejectFor, totalStake) === \"Approved\"}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Candidate;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport BigNumber from \"bignumber.js\";\r\nimport {BalanceBlock} from \"../common\";\r\n\r\nimport {Box, Distribution} from '@aragon/ui';\r\nimport {formatMoney, ownership} from \"../../utils/number\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype RegulationHeaderProps = {\r\n  totalSupply: BigNumber,\r\n\r\n  totalBonded: BigNumber,\r\n  totalStaged: BigNumber,\r\n  totalRedeemable: BigNumber,\r\n\r\n  poolLiquidity: BigNumber,\r\n  poolRewarded: BigNumber,\r\n  poolClaimable: BigNumber,\r\n\r\n  legacyPoolRewarded: BigNumber,\r\n  legacyPoolClaimable: BigNumber,\r\n\r\n  totalDebt: BigNumber,\r\n  totalCoupons: BigNumber,\r\n  couponPremium: BigNumber,\r\n};\r\n\r\nconst Container = styled(Box)`${BoxStyle}`;\r\n\r\nconst RegulationHeader = ({\r\n  totalSupply,\r\n  totalBonded, totalStaged, totalRedeemable,\r\n  poolLiquidity, poolRewarded, poolClaimable,\r\n  legacyPoolRewarded, legacyPoolClaimable,\r\n  totalDebt, totalCoupons, couponPremium\r\n}: RegulationHeaderProps) => {\r\n  const daoTotalSupply = totalBonded.plus(totalStaged).plus(totalRedeemable);\r\n  const poolTotalSupply = poolLiquidity.plus(poolRewarded).plus(poolClaimable);\r\n  const legacyPoolTotalSupply = legacyPoolRewarded.plus(legacyPoolClaimable);\r\n  const circulatingSupply = totalSupply.minus(daoTotalSupply).minus(poolTotalSupply).minus(legacyPoolTotalSupply);\r\n\r\n  return (\r\n    <>\r\n      <div style={{display: 'flex', flexWrap: 'wrap'}}>\r\n        <div style={{ flexBasis: '25%', marginRight: '2%' }}>\r\n          <Container heading=\"Supply Allocation\">\r\n            <Distribution\r\n              heading={`${formatMoney(totalSupply.toNumber())}`}\r\n              items={[\r\n                { item: 'DAO', percentage: +(ownership(daoTotalSupply, totalSupply).toNumber().toFixed(2)) },\r\n                { item: 'Uniswap', percentage: +(ownership(poolTotalSupply, totalSupply).toNumber().toFixed(2)) },\r\n                { item: 'Circulating', percentage: +(ownership(circulatingSupply, totalSupply).toNumber().toFixed(2)) },\r\n              ]}\r\n            />\r\n          </Container>\r\n        </div>\r\n        <div style={{ flexBasis: '25%', marginRight: '2%' }}>\r\n          <Container heading=\"DAO Breakdown\">\r\n            <Distribution\r\n              heading={`${formatMoney(daoTotalSupply.toNumber())}`}\r\n              items={[\r\n                { item: 'Bonded', percentage: +(ownership(totalBonded, daoTotalSupply).toNumber().toFixed(2)) },\r\n                { item: 'Staged', percentage: +(ownership(totalStaged, daoTotalSupply).toNumber().toFixed(2)) },\r\n                { item: 'Redeemable', percentage: +(ownership(totalRedeemable, daoTotalSupply).toNumber().toFixed(2)) },\r\n              ]}\r\n            />\r\n          </Container>\r\n        </div>\r\n        <div style={{ flexBasis: '25%' }}>\r\n          <Container heading=\"Uniswap Breakdown\">\r\n            <Distribution\r\n              heading={`${formatMoney(poolTotalSupply.toNumber())}`}\r\n              items={[\r\n                { item: 'Liquidity', percentage: +(ownership(poolLiquidity, poolTotalSupply).toNumber().toFixed(2)) },\r\n                { item: 'Rewarded', percentage: +(ownership(poolRewarded, poolTotalSupply).toNumber().toFixed(2)) },\r\n                { item: 'Claimable', percentage: +(ownership(poolClaimable, poolTotalSupply).toNumber().toFixed(2)) },\r\n              ]}\r\n            />\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\n\r\nexport default RegulationHeader;\r\n","import React, {useEffect, useState} from 'react';\r\nimport styled from 'styled-components';\r\nimport { Box, DataView } from '@aragon/ui';\r\n\r\nimport {getAllRegulations} from '../../utils/infura';\r\nimport {BSD, BSDS} from \"../../constants/tokens\";\r\nimport {formatBN, toTokenUnitsBN} from \"../../utils/number\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype RegulationHistoryProps = {\r\n  user: string,\r\n};\r\n\r\ntype Regulation = {\r\n  type: string,\r\n  data: RegulationEntry\r\n}\r\n\r\ntype RegulationEntry = {\r\n  epoch: string;\r\n  price: string;\r\n  deltaRedeemable: string;\r\n  deltaDebt: string;\r\n  deltaBonded: string;\r\n}\r\n\r\nconst Container = styled(Box)`${BoxStyle}`;\r\n\r\nfunction formatPrice(type, data) {\r\n  return type === 'NEUTRAL' ? '1.00' : formatBN(toTokenUnitsBN(new BigNumber(data.price), BSD.decimals), 3);\r\n}\r\n\r\nfunction formatDeltaRedeemable(type, data) {\r\n  return type === 'INCREASE' ?\r\n    '+' + formatBN(toTokenUnitsBN(new BigNumber(data.newRedeemable), BSD.decimals), 2) :\r\n    '+0.00';\r\n}\r\n\r\nfunction formatDeltaDebt(type, data) {\r\n  return type === 'INCREASE' ?\r\n    '-' + formatBN(toTokenUnitsBN(new BigNumber(data.lessDebt), BSD.decimals), 2) :\r\n    type === 'DECREASE' ?\r\n      '+' + formatBN(toTokenUnitsBN(new BigNumber(data.newDebt), BSD.decimals), 2) :\r\n      '+0.00';\r\n}\r\n\r\nfunction formatDeltaBonded(type, data) {\r\n  return type === 'INCREASE' ?\r\n    '+' + formatBN(toTokenUnitsBN(new BigNumber(data.newBonded), BSD.decimals), 2) :\r\n    '+0.00';\r\n}\r\n\r\nfunction renderEntry({ type, data }: Regulation): string[] {\r\n  return [\r\n    data.epoch.toString(),\r\n    formatPrice(type, data),\r\n    formatDeltaRedeemable(type, data),\r\n    formatDeltaDebt(type, data),\r\n    formatDeltaBonded(type, data),\r\n  ]\r\n}\r\n\r\nfunction RegulationHistory({\r\n  user,\r\n}: RegulationHistoryProps) {\r\n  const [regulations, setRegulations] = useState<Regulation[]>([]);\r\n  const [page, setPage] = useState(0)\r\n  const [initialized, setInitialized] = useState(false)\r\n\r\n  //Update User balances\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const [allRegulations] = await Promise.all([\r\n        getAllRegulations(BSDS.addr),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        setRegulations(allRegulations);\r\n        setInitialized(true);\r\n      }\r\n    }\r\n\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <Container>\r\n      <DataView\r\n        fields={['Epoch', 'Price', ' Redeemable', ' Debt', ' Bonded']}\r\n        status={ initialized ? 'default' : 'loading' }\r\n        entries={regulations}\r\n        entriesPerPage={10}\r\n        page={page}\r\n        onPageChange={setPage}\r\n        renderEntry={renderEntry}\r\n      />\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default RegulationHistory;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport {\r\n  getCouponPremium,\r\n  getPoolTotalClaimable, getPoolTotalRewarded, getTokenBalance,\r\n  getTokenTotalSupply, getTotalBonded, getTotalCoupons, getTotalDebt, getTotalRedeemable, getTotalStaged,\r\n} from '../../utils/infura';\r\nimport {BSD, BSDS, UNI} from \"../../constants/tokens\";\r\nimport {toTokenUnitsBN} from \"../../utils/number\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport RegulationHeader from \"./Header\";\r\nimport RegulationHistory from \"./RegulationHistory\";\r\nimport IconHeader from \"../common/IconHeader\";\r\nimport {getLegacyPoolAddress, getPoolAddress} from \"../../utils/pool\";\r\nimport Header from '../common/Header';\r\n\r\nconst ONE_COUPON = new BigNumber(10).pow(18);\r\n\r\nfunction Regulation({ user }: {user: string}) {\r\n\r\n  const [totalSupply, setTotalSupply] = useState(new BigNumber(0));\r\n  const [totalBonded, setTotalBonded] = useState(new BigNumber(0));\r\n  const [totalStaged, setTotalStaged] = useState(new BigNumber(0));\r\n  const [totalRedeemable, setTotalRedeemable] = useState(new BigNumber(0));\r\n  const [poolLiquidity, setPoolLiquidity] = useState(new BigNumber(0));\r\n  const [poolTotalRewarded, setPoolTotalRewarded] = useState(new BigNumber(0));\r\n  const [poolTotalClaimable, setPoolTotalClaimable] = useState(new BigNumber(0));\r\n  const [legacyPoolTotalRewarded, setLegacyPoolTotalRewarded] = useState(new BigNumber(0));\r\n  const [legacyPoolTotalClaimable, setLegacyPoolTotalClaimable] = useState(new BigNumber(0));\r\n  const [totalDebt, setTotalDebt] = useState(new BigNumber(0));\r\n  const [totalCoupons, setTotalCoupons] = useState(new BigNumber(0));\r\n  const [couponPremium, setCouponPremium] = useState(new BigNumber(0));\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const poolAddress = await getPoolAddress();\r\n      const legacyPoolAddress = getLegacyPoolAddress(poolAddress);\r\n\r\n      const [\r\n        totalSupplyStr,\r\n        totalBondedStr, totalStagedStr, totalRedeemableStr,\r\n        poolLiquidityStr, poolTotalRewardedStr, poolTotalClaimableStr,\r\n        // legacyPoolTotalRewardedStr, legacyPoolTotalClaimableStr,\r\n        totalDebtStr, totalCouponsStr\r\n      ] = await Promise.all([\r\n        getTokenTotalSupply(BSD.addr),\r\n\r\n        getTotalBonded(BSDS.addr),\r\n        getTotalStaged(BSDS.addr),\r\n        getTotalRedeemable(BSDS.addr),\r\n\r\n        getTokenBalance(BSD.addr, UNI.addr),\r\n        getPoolTotalRewarded(poolAddress),\r\n        getPoolTotalClaimable(poolAddress),\r\n\r\n        // getPoolTotalRewarded(legacyPoolAddress),\r\n        // getPoolTotalClaimable(legacyPoolAddress),\r\n\r\n        getTotalDebt(BSDS.addr),\r\n        getTotalCoupons(BSDS.addr),\r\n      ]);\r\n\r\n      if (!isCancelled) {\r\n        setTotalSupply(toTokenUnitsBN(totalSupplyStr, BSD.decimals));\r\n\r\n        setTotalBonded(toTokenUnitsBN(totalBondedStr, BSD.decimals));\r\n        setTotalStaged(toTokenUnitsBN(totalStagedStr, BSD.decimals));\r\n        setTotalRedeemable(toTokenUnitsBN(totalRedeemableStr, BSD.decimals));\r\n\r\n        setPoolLiquidity(toTokenUnitsBN(poolLiquidityStr, BSD.decimals));\r\n        setPoolTotalRewarded(toTokenUnitsBN(poolTotalRewardedStr, BSD.decimals));\r\n        setPoolTotalClaimable(toTokenUnitsBN(poolTotalClaimableStr, BSD.decimals));\r\n\r\n        // setLegacyPoolTotalRewarded(toTokenUnitsBN(legacyPoolTotalRewardedStr, BSD.decimals));\r\n        // setLegacyPoolTotalClaimable(toTokenUnitsBN(legacyPoolTotalClaimableStr, BSD.decimals));\r\n\r\n        setTotalDebt(toTokenUnitsBN(totalDebtStr, BSD.decimals));\r\n        setTotalCoupons(toTokenUnitsBN(totalCouponsStr, BSD.decimals));\r\n\r\n        if (new BigNumber(totalDebtStr).isGreaterThan(ONE_COUPON)) {\r\n          const couponPremiumStr = await getCouponPremium(BSDS.addr, ONE_COUPON)\r\n          setCouponPremium(toTokenUnitsBN(couponPremiumStr, BSD.decimals));\r\n        } else {\r\n          setCouponPremium(new BigNumber(0));\r\n        }\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n      <div style={{ color: 'rgba(255, 255, 255, 0.8)' }}>\r\n        <IconHeader icon={<i className=\"fas fa-chart-area\"/>} text=\"Supply Regulation\"/>\r\n      </div>\r\n\r\n      <RegulationHeader\r\n        totalSupply={totalSupply}\r\n\r\n        totalBonded={totalBonded}\r\n        totalStaged={totalStaged}\r\n        totalRedeemable={totalRedeemable}\r\n\r\n        poolLiquidity={poolLiquidity}\r\n        poolRewarded={poolTotalRewarded}\r\n        poolClaimable={poolTotalClaimable}\r\n\r\n        legacyPoolRewarded={legacyPoolTotalRewarded}\r\n        legacyPoolClaimable={legacyPoolTotalClaimable}\r\n\r\n        totalDebt={totalDebt}\r\n        totalCoupons={totalCoupons}\r\n        couponPremium={couponPremium}\r\n      />\r\n\r\n      <Header primary=\"Regulation History\" />\r\n\r\n      <RegulationHistory\r\n        user={user}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Regulation;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Box, Button, IconCirclePlus, IconCircleMinus,\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport styled from 'styled-components';\r\nimport {\r\n  BalanceBlock, MaxButton,\r\n} from '../common/index';\r\nimport {approve, depositPool, withdrawPool} from '../../utils/web3';\r\nimport {isPos, toBaseUnitBN} from '../../utils/number';\r\nimport {UNI} from \"../../constants/tokens\";\r\nimport {MAX_UINT256} from \"../../constants/values\";\r\nimport BigNumberInput from \"../common/BigNumberInput\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype WithdrawDepositProps = {\r\n  poolAddress: string\r\n  user: string\r\n  balance: BigNumber,\r\n  allowance: BigNumber,\r\n  stagedBalance: BigNumber,\r\n  status: number\r\n};\r\n\r\nconst Container = styled(Box)`${BoxStyle} margin-bottom: 32px;`;\r\n\r\nfunction WithdrawDeposit({\r\n  poolAddress, user, balance, allowance, stagedBalance, status\r\n}: WithdrawDepositProps) {\r\n  const [depositAmount, setDepositAmount] = useState(new BigNumber(0));\r\n  const [withdrawAmount, setWithdrawAmount] = useState(new BigNumber(0));\r\n\r\n  return (\r\n    <Container heading=\"Stage\">\r\n      {allowance.comparedTo(MAX_UINT256) === 0 ?\r\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\r\n          {/* total Issued */}\r\n          <div style={{flexBasis: '30%'}}>\r\n            <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"UNI-V2\"}/>\r\n          </div>\r\n          {/* Deposit UNI-V2 into Pool */}\r\n          <div style={{flexBasis: '32%', paddingTop: '2%'}}>\r\n            <div style={{display: 'flex'}}>\r\n              <div style={{width: '60%', minWidth: '6em'}}>\r\n                <>\r\n                  <BigNumberInput\r\n                    adornment=\"UNI-V2\"\r\n                    value={depositAmount}\r\n                    setter={setDepositAmount}\r\n                    disabled={status === 1}\r\n                  />\r\n                  <MaxButton\r\n                    onClick={() => {\r\n                      setDepositAmount(balance);\r\n                    }}\r\n                  />\r\n                </>\r\n              </div>\r\n              <div style={{width: '40%', minWidth: '7em'}}>\r\n                <Button\r\n                  wide\r\n                  icon={<IconCirclePlus/>}\r\n                  label=\"Deposit\"\r\n                  onClick={() => {\r\n                    depositPool(\r\n                      poolAddress,\r\n                      toBaseUnitBN(depositAmount, UNI.decimals),\r\n                      (hash) => setDepositAmount(new BigNumber(0))\r\n                    );\r\n                  }}\r\n                  disabled={poolAddress === '' || status === 1 || !isPos(depositAmount)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div style={{width: '6%'}}/>\r\n          {/* Withdraw BSD from DAO */}\r\n          <div style={{flexBasis: '32%', paddingTop: '2%'}}>\r\n            <div style={{display: 'flex'}}>\r\n              <div style={{width: '60%', minWidth: '6em'}}>\r\n                <>\r\n                  <BigNumberInput\r\n                    adornment=\"UNI-V2\"\r\n                    value={withdrawAmount}\r\n                    setter={setWithdrawAmount}\r\n                    disabled={status === 1}\r\n                  />\r\n                  <MaxButton\r\n                    onClick={() => {\r\n                      setWithdrawAmount(stagedBalance);\r\n                    }}\r\n                  />\r\n                </>\r\n              </div>\r\n              <div style={{width: '40%', minWidth: '7em'}}>\r\n                <Button\r\n                  wide\r\n                  icon={<IconCircleMinus/>}\r\n                  label=\"Withdraw\"\r\n                  onClick={() => {\r\n                    withdrawPool(\r\n                      poolAddress,\r\n                      toBaseUnitBN(withdrawAmount, UNI.decimals),\r\n                      (hash) => setWithdrawAmount(new BigNumber(0))\r\n                    );\r\n                  }}\r\n                  disabled={poolAddress === '' || status === 1 || !isPos(withdrawAmount)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        :\r\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\r\n          {/* total Issued */}\r\n          <div style={{flexBasis: '30%'}}>\r\n            <BalanceBlock asset=\"Staged\" balance={stagedBalance} suffix={\"UNI-V2\"}/>\r\n          </div>\r\n          <div style={{flexBasis: '40%'}}/>\r\n          {/* Approve Pool to spend UNI-V2 */}\r\n          <div style={{flexBasis: '30%', paddingTop: '2%'}}>\r\n            <Button\r\n              wide\r\n              icon={<IconCirclePlus />}\r\n              label=\"Unlock\"\r\n              onClick={() => {\r\n                approve(UNI.addr, poolAddress);\r\n              }}\r\n              disabled={poolAddress === '' || user === ''}\r\n            />\r\n          </div>\r\n        </div>\r\n      }\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default WithdrawDeposit;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Box, Button, IconCirclePlus, IconCircleMinus,\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport styled from 'styled-components';\r\nimport {\r\n  BalanceBlock, MaxButton,\r\n} from '../common/index';\r\nimport {bondPool, unbondPool} from '../../utils/web3';\r\nimport {isPos, toBaseUnitBN} from '../../utils/number';\r\nimport {BSDS, UNI} from \"../../constants/tokens\";\r\nimport BigNumberInput from \"../common/BigNumberInput\";\r\nimport TextBlock from \"../common/TextBlock\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype BondUnbondProps = {\r\n  poolAddress: string,\r\n  staged: BigNumber,\r\n  bonded: BigNumber,\r\n  lockup: number,\r\n};\r\n\r\nconst Container = styled(Box)`${BoxStyle} margin-bottom: 32px;`;\r\n\r\nfunction BondUnbond({\r\n  poolAddress, staged, bonded, lockup\r\n}: BondUnbondProps) {\r\n  const [bondAmount, setBondAmount] = useState(new BigNumber(0));\r\n  const [unbondAmount, setUnbondAmount] = useState(new BigNumber(0));\r\n\r\n  return (\r\n    <Container heading=\"Bond\">\r\n      <div style={{display: 'flex', flexWrap: 'wrap'}}>\r\n        {/* Total bonded */}\r\n        <div style={{flexBasis: '16%'}}>\r\n          <BalanceBlock asset=\"Bonded\" balance={bonded} suffix={\"UNI-V2\"} />\r\n        </div>\r\n        {/* Exit lockup */}\r\n        <div style={{flexBasis: '16%'}}>\r\n          <TextBlock label=\"Exit Lockup\" text={lockup == 0 ? \"\" : lockup == 1 ? \"1 epoch\" : `${lockup} epochs`}/>\r\n        </div>\r\n        {/* Bond UNI-V2 within Pool */}\r\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\r\n          <div style={{display: 'flex'}}>\r\n            <div style={{width: '60%', minWidth: '6em'}}>\r\n              <>\r\n                <BigNumberInput\r\n                  adornment=\"UNI-V2\"\r\n                  value={bondAmount}\r\n                  setter={setBondAmount}\r\n                />\r\n                <MaxButton\r\n                  onClick={() => {\r\n                    setBondAmount(staged);\r\n                  }}\r\n                />\r\n              </>\r\n            </div>\r\n            <div style={{width: '40%', minWidth: '7em'}}>\r\n              <Button\r\n                wide\r\n                icon={<IconCirclePlus/>}\r\n                label=\"Bond\"\r\n                onClick={() => {\r\n                  bondPool(\r\n                    poolAddress,\r\n                    toBaseUnitBN(bondAmount, UNI.decimals),\r\n                    (hash) => setBondAmount(new BigNumber(0))\r\n                  );\r\n                }}\r\n                disabled={poolAddress === '' || !isPos(bondAmount)}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div style={{flexBasis: '2%'}}/>\r\n        {/* Unbond UNI-V2 within Pool */}\r\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\r\n          <div style={{display: 'flex'}}>\r\n            <div style={{width: '60%', minWidth: '6em'}}>\r\n              <>\r\n                <BigNumberInput\r\n                  adornment=\"UNI-V2\"\r\n                  value={unbondAmount}\r\n                  setter={setUnbondAmount}\r\n                />\r\n                <MaxButton\r\n                  onClick={() => {\r\n                    setUnbondAmount(bonded);\r\n                  }}\r\n                />\r\n              </>\r\n            </div>\r\n            <div style={{width: '40%', minWidth: '7em'}}>\r\n              <Button\r\n                wide\r\n                icon={<IconCircleMinus/>}\r\n                label=\"Unbond\"\r\n                onClick={() => {\r\n                  unbondPool(\r\n                    poolAddress,\r\n                    toBaseUnitBN(unbondAmount, UNI.decimals),\r\n                    (hash) => setUnbondAmount(new BigNumber(0))\r\n                  );\r\n                }}\r\n                disabled={poolAddress === '' || !isPos(unbondAmount)}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default BondUnbond;\r\n","import React from 'react';\r\nimport BigNumber from 'bignumber.js';\r\nimport styled from 'styled-components';\r\nimport { BalanceBlock } from '../common/index';\r\nimport TextBlock from \"../common/TextBlock\";\r\nimport {ownership} from \"../../utils/number\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype PoolPageHeaderProps = {\r\n  accountUNIBalance: BigNumber,\r\n  accountBondedBalance: BigNumber,\r\n  accountRewardedBSDBalance: BigNumber,\r\n  accountClaimableBSDBalance: BigNumber,\r\n  poolTotalBonded: BigNumber,\r\n  accountPoolStatus: number,\r\n};\r\n\r\nconst STATUS_MAP = [\"Frozen\", \"Fluid\"];\r\n\r\nconst Container = styled.div`\r\n  ${BoxStyle}\r\n  margin-bottom: 32px;\r\n`;\r\n\r\nconst PoolPageHeader = ({\r\n  accountUNIBalance, accountBondedBalance, accountRewardedBSDBalance, accountClaimableBSDBalance, poolTotalBonded, accountPoolStatus\r\n}: PoolPageHeaderProps) => (\r\n  <Container style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\r\n    <div style={{ flexBasis: '20%' }}>\r\n      <BalanceBlock asset=\"Balance\" balance={accountUNIBalance}  suffix={\" UNI-V2\"}/>\r\n    </div>\r\n    <div style={{ flexBasis: '20%' }}>\r\n      <BalanceBlock asset=\"Rewarded\" balance={accountRewardedBSDBalance} suffix={\" BSD\"} />\r\n    </div>\r\n    <div style={{ flexBasis: '20%' }}>\r\n      <BalanceBlock asset=\"Claimable\" balance={accountClaimableBSDBalance} suffix={\" BSD\"} />\r\n    </div>\r\n    <div style={{ flexBasis: '20%' }}>\r\n      <BalanceBlock asset=\"Pool Ownership\" balance={ownership(accountBondedBalance, poolTotalBonded)}  suffix={\"%\"}/>\r\n    </div>\r\n    <div style={{ flexBasis: '20%' }}>\r\n      <TextBlock label=\"Pool Status\" text={STATUS_MAP[accountPoolStatus]}/>\r\n    </div>\r\n  </Container>\r\n);\r\n\r\n\r\nexport default PoolPageHeader;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Box, Button, IconArrowDown,\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport styled from 'styled-components';\r\nimport {\r\n  BalanceBlock, MaxButton,\r\n} from '../common/index';\r\nimport {claimPool} from '../../utils/web3';\r\nimport {isPos, toBaseUnitBN} from '../../utils/number';\r\nimport {BSD} from \"../../constants/tokens\";\r\nimport BigNumberInput from \"../common/BigNumberInput\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype ClaimProps = {\r\n  poolAddress: string\r\n  claimable: BigNumber,\r\n  status: number\r\n};\r\n\r\nconst Container = styled(Box)`${BoxStyle} margin-bottom: 32px;`;\r\n\r\nfunction Claim({\r\n  poolAddress, claimable, status\r\n}: ClaimProps) {\r\n  const [claimAmount, setClaimAmount] = useState(new BigNumber(0));\r\n\r\n  return (\r\n    <Container heading=\"Claim\">\r\n      <div style={{display: 'flex', flexWrap: 'wrap'}}>\r\n        {/* total Issued */}\r\n        <div style={{flexBasis: '30%'}}>\r\n          <BalanceBlock asset=\"Claimable\" balance={claimable} suffix={\"BSD\"} />\r\n        </div>\r\n        {/* Deposit UNI-V2 into Pool */}\r\n        <div style={{width: '38%'}}/>\r\n        <div style={{flexBasis: '32%', paddingTop: '2%'}}>\r\n          <div style={{display: 'flex'}}>\r\n            <div style={{width: '60%', minWidth: '6em'}}>\r\n              <>\r\n                <BigNumberInput\r\n                  adornment=\"BSD\"\r\n                  value={claimAmount}\r\n                  setter={setClaimAmount}\r\n                  disabled={status === 1}\r\n                />\r\n                <MaxButton\r\n                  onClick={() => {\r\n                    setClaimAmount(claimable);\r\n                  }}\r\n                />\r\n              </>\r\n            </div>\r\n            <div style={{width: '40%', minWidth: '6em'}}>\r\n              <Button\r\n                wide\r\n                icon={<IconArrowDown/>}\r\n                label=\"Claim\"\r\n                onClick={() => {\r\n                  claimPool(\r\n                    poolAddress,\r\n                    toBaseUnitBN(claimAmount, BSD.decimals),\r\n                    (hash) => setClaimAmount(new BigNumber(0))\r\n                  );\r\n                }}\r\n                disabled={poolAddress === '' || status === 1 || !isPos(claimAmount)}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Claim;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Box, Button, IconArrowUp, IconCirclePlus\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport styled from 'styled-components';\r\nimport {\r\n  BalanceBlock, MaxButton, PriceSection,\r\n} from '../common/index';\r\nimport {approve, providePool} from '../../utils/web3';\r\nimport {isPos, toBaseUnitBN, toTokenUnitsBN} from '../../utils/number';\r\nimport {BSD, USDC} from \"../../constants/tokens\";\r\nimport {MAX_UINT256} from \"../../constants/values\";\r\nimport BigNumberInput from \"../common/BigNumberInput\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype ProvideProps = {\r\n  poolAddress: string,\r\n  user: string,\r\n  rewarded: BigNumber,\r\n  pairBalanceBSD: BigNumber,\r\n  pairBalanceUSDC: BigNumber,\r\n  userUSDCBalance: BigNumber,\r\n  userUSDCAllowance: BigNumber,\r\n  status: number,\r\n};\r\n\r\nconst Container = styled(Box)`${BoxStyle}`;\r\n\r\nfunction Provide({\r\n  poolAddress, user, rewarded, pairBalanceBSD, pairBalanceUSDC, userUSDCBalance, userUSDCAllowance, status\r\n}: ProvideProps) {\r\n  const [provideAmount, setProvideAmount] = useState(new BigNumber(0));\r\n  const [usdcAmount, setUsdcAmount] = useState(new BigNumber(0));\r\n\r\n  const USDCToBSDRatio = pairBalanceUSDC.isZero() ? new BigNumber(1) : pairBalanceUSDC.div(pairBalanceBSD);\r\n\r\n  const onChangeAmountBSD = (amountBSD) => {\r\n    if (!amountBSD) {\r\n      setProvideAmount(new BigNumber(0));\r\n      setUsdcAmount(new BigNumber(0));\r\n      return;\r\n    }\r\n\r\n    const amountBSDBN = new BigNumber(amountBSD)\r\n    setProvideAmount(amountBSDBN);\r\n\r\n    const amountBSDBU = toBaseUnitBN(amountBSDBN, BSD.decimals);\r\n    const newAmountUSDC = toTokenUnitsBN(\r\n      amountBSDBU.multipliedBy(USDCToBSDRatio).integerValue(BigNumber.ROUND_FLOOR),\r\n      BSD.decimals);\r\n    setUsdcAmount(newAmountUSDC);\r\n  };\r\n\r\n  return (\r\n    <Container heading=\"Provide\">\r\n      {userUSDCAllowance.comparedTo(MAX_UINT256.dividedBy(2)) > 0 ?\r\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\r\n          {/* total rewarded */}\r\n          <div style={{flexBasis: '30%'}}>\r\n            <BalanceBlock asset=\"Rewarded\" balance={rewarded} suffix={\"BSD\"} />\r\n          </div>\r\n          <div style={{flexBasis: '30%'}}>\r\n            <BalanceBlock asset=\"USDC Balance\" balance={userUSDCBalance} suffix={\"USDC\"} />\r\n          </div>\r\n          <div style={{width: '8%'}}/>\r\n          {/* Provide liquidity using Pool rewards */}\r\n          <div style={{flexBasis: '32%', paddingTop: '2%'}}>\r\n            <div style={{display: 'flex'}}>\r\n              <div style={{width: '60%', minWidth: '6em'}}>\r\n                <>\r\n                  <BigNumberInput\r\n                    adornment=\"BSD\"\r\n                    value={provideAmount}\r\n                    setter={onChangeAmountBSD}\r\n                    disabled={status === 1}\r\n                  />\r\n                  <PriceSection label=\"Requires \" amt={usdcAmount} symbol=\" USDC\"/>\r\n                  <MaxButton\r\n                    onClick={() => {\r\n                      onChangeAmountBSD(rewarded);\r\n                    }}\r\n                  />\r\n                </>\r\n              </div>\r\n              <div style={{width: '40%', minWidth: '6em'}}>\r\n                <Button\r\n                  wide\r\n                  icon={<IconArrowUp/>}\r\n                  label=\"Provide\"\r\n                  onClick={() => {\r\n                    providePool(\r\n                      poolAddress,\r\n                      toBaseUnitBN(provideAmount, BSD.decimals),\r\n                      (hash) => setProvideAmount(new BigNumber(0))\r\n                    );\r\n                  }}\r\n                  disabled={poolAddress === '' || status === 1 || !isPos(provideAmount) || usdcAmount.isGreaterThan(userUSDCBalance)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        :\r\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\r\n          {/* total rewarded */}\r\n          <div style={{flexBasis: '30%'}}>\r\n            <BalanceBlock asset=\"Rewarded\" balance={rewarded} suffix={\"BSD\"} />\r\n          </div>\r\n          <div style={{flexBasis: '30%'}}>\r\n            <BalanceBlock asset=\"USDC Balance\" balance={userUSDCBalance} suffix={\"USDC\"} />\r\n          </div>\r\n          <div style={{width: '8%'}}/>\r\n          {/* Approve Pool to spend USDC */}\r\n          <div style={{flexBasis: '30%', paddingTop: '2%'}}>\r\n            <Button\r\n              wide\r\n              icon={<IconCirclePlus/>}\r\n              label=\"Unlock\"\r\n              onClick={() => {\r\n                approve(USDC.addr, poolAddress);\r\n              }}\r\n              disabled={poolAddress === '' || user === ''}\r\n            />\r\n          </div>\r\n        </div>\r\n      }\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Provide;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Box, Button, IconArrowDown, IconCircleMinus,\r\n} from '@aragon/ui';\r\nimport BigNumber from 'bignumber.js';\r\nimport styled from 'styled-components';\r\nimport {\r\n  BalanceBlock,\r\n} from '../common/index';\r\nimport {claimPool, unbondPool, withdrawPool} from '../../utils/web3';\r\nimport {isPos, toBaseUnitBN} from '../../utils/number';\r\nimport {BSD, UNI} from \"../../constants/tokens\";\r\nimport BoxStyle from '../common/BoxStyle';\r\n\r\ntype MigrateProps = {\r\n  legacyPoolAddress: string,\r\n  staged: BigNumber,\r\n  claimable: BigNumber,\r\n  bonded: BigNumber,\r\n  status: number,\r\n  isRewardNegative: boolean,\r\n};\r\n\r\nconst Container = styled(Box)`${BoxStyle} margin-bottom: 32px;`;\r\n\r\nfunction Migrate({\r\n  legacyPoolAddress, staged, claimable, bonded, status, isRewardNegative\r\n}: MigrateProps) {\r\n  const [unbonded, setUnbonded] = useState(false);\r\n  const [withdrawn, setWithdrawn] = useState(false);\r\n  const [claimed, setClaimed] = useState(false);\r\n\r\n  return (\r\n    <Container heading=\"Migrate\">\r\n      <div style={{display: 'flex', flexWrap: 'wrap'}}>\r\n        {/* Unbond UNI-V2 within Pool */}\r\n        <div style={{flexBasis: '32%', paddingTop: '2%'}}>\r\n          <div style={{display: 'flex'}}>\r\n            <div style={{width: '60%'}}>\r\n              <BalanceBlock asset=\"Bonded\" balance={bonded} suffix={\"UNI-V2\"} />\r\n              <Button\r\n                wide\r\n                icon={<IconCircleMinus/>}\r\n                label=\"Unbond\"\r\n                onClick={() => {\r\n                  unbondPool(\r\n                    legacyPoolAddress,\r\n                    toBaseUnitBN(bonded, UNI.decimals),\r\n                    (hash) => setUnbonded(hash.length > 0)\r\n                  );\r\n                }}\r\n                disabled={legacyPoolAddress === '' || !isPos(bonded) || unbonded || isRewardNegative}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* Withdraw UNI-V2 within Pool */}\r\n        <div style={{flexBasis: '32%', paddingTop: '2%'}}>\r\n          <div style={{display: 'flex'}}>\r\n            <div style={{width: '60%'}}>\r\n              <BalanceBlock asset=\"Staged\" balance={staged} suffix={\"UNI-V2\"} />\r\n              <Button\r\n                wide\r\n                icon={<IconCircleMinus/>}\r\n                label=\"Withdraw\"\r\n                onClick={() => {\r\n                  withdrawPool(\r\n                    legacyPoolAddress,\r\n                    toBaseUnitBN(staged, UNI.decimals),\r\n                    (hash) => setWithdrawn(hash.length > 0)\r\n                  );\r\n                }}\r\n                disabled={legacyPoolAddress === '' || !isPos(staged) || withdrawn || status == 1}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* Claim BSD within Pool */}\r\n        <div style={{flexBasis: '32%', paddingTop: '2%'}}>\r\n          <div style={{display: 'flex'}}>\r\n            <div style={{width: '60%'}}>\r\n              <BalanceBlock asset=\"Claimable\" balance={claimable} suffix={\"BSD\"} />\r\n              <Button\r\n                wide\r\n                icon={<IconArrowDown/>}\r\n                label=\"Claim\"\r\n                onClick={() => {\r\n                  claimPool(\r\n                    legacyPoolAddress,\r\n                    toBaseUnitBN(claimable, BSD.decimals),\r\n                    (hash) => setClaimed(hash.length > 0)\r\n                  );\r\n                }}\r\n                disabled={legacyPoolAddress === '' || !isPos(claimable) || claimed || status == 1}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Migrate;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport BigNumber from 'bignumber.js';\r\nimport {\r\n  getPool,\r\n  getPoolBalanceOfBonded, getPoolBalanceOfClaimable,\r\n  getPoolBalanceOfRewarded,\r\n  getPoolBalanceOfStaged,\r\n  getPoolStatusOf, getPoolTotalBonded,\r\n  getTokenAllowance,\r\n  getTokenBalance,\r\n} from '../../utils/infura';\r\nimport {BSD, BSDS, UNI, USDC} from \"../../constants/tokens\";\r\nimport { toTokenUnitsBN } from '../../utils/number';\r\n\r\nimport WithdrawDeposit from \"./WithdrawDeposit\";\r\nimport BondUnbond from \"./BondUnbond\";\r\nimport PoolPageHeader from \"./Header\";\r\nimport Claim from \"./Claim\";\r\nimport Provide from \"./Provide\";\r\nimport IconHeader from \"../common/IconHeader\";\r\nimport Migrate from \"./Migrate\";\r\nimport {getLegacyPoolAddress, getPoolAddress} from \"../../utils/pool\";\r\nimport {DollarPool4} from \"../../constants/contracts\";\r\nimport Header from '../common/Header';\r\nimport { POOL_EXIT_LOCKUP_EPOCHS } from '../../constants/values';\r\n\r\n\r\n\r\nfunction Pool({ user }: {user: string}) {\r\n  const { override } = useParams();\r\n  if (override) {\r\n    user = override;\r\n  }\r\n\r\n  const [poolAddress, setPoolAddress] = useState(\"\");\r\n  const [poolTotalBonded, setPoolTotalBonded] = useState(new BigNumber(0));\r\n  const [pairBalanceBSD, setPairBalanceBSD] = useState(new BigNumber(0));\r\n  const [pairBalanceUSDC, setPairBalanceUSDC] = useState(new BigNumber(0));\r\n  const [userUNIBalance, setUserUNIBalance] = useState(new BigNumber(0));\r\n  const [userUNIAllowance, setUserUNIAllowance] = useState(new BigNumber(0));\r\n  const [userUSDCBalance, setUserUSDCBalance] = useState(new BigNumber(0));\r\n  const [userUSDCAllowance, setUserUSDCAllowance] = useState(new BigNumber(0));\r\n  const [userStagedBalance, setUserStagedBalance] = useState(new BigNumber(0));\r\n  const [userBondedBalance, setUserBondedBalance] = useState(new BigNumber(0));\r\n  const [userRewardedBalance, setUserRewardedBalance] = useState(new BigNumber(0));\r\n  const [userClaimableBalance, setUserClaimableBalance] = useState(new BigNumber(0));\r\n  const [userStatus, setUserStatus] = useState(0);\r\n  const [legacyUserStagedBalance, setLegacyUserStagedBalance] = useState(new BigNumber(0));\r\n  const [legacyUserBondedBalance, setLegacyUserBondedBalance] = useState(new BigNumber(0));\r\n  const [legacyUserRewardedBalance, setLegacyUserRewardedBalance] = useState(new BigNumber(0));\r\n  const [legacyUserClaimableBalance, setLegacyUserClaimableBalance] = useState(new BigNumber(0));\r\n  const [legacyUserStatus, setLegacyUserStatus] = useState(0);\r\n  const [lockup, setLockup] = useState(0);\r\n\r\n  //Update User balances\r\n  useEffect(() => {\r\n    if (user === '') {\r\n      setPoolAddress(\"\");\r\n      setPoolTotalBonded(new BigNumber(0));\r\n      setPairBalanceBSD(new BigNumber(0));\r\n      setPairBalanceUSDC(new BigNumber(0));\r\n      setUserUNIBalance(new BigNumber(0));\r\n      setUserUNIAllowance(new BigNumber(0));\r\n      setUserUSDCBalance(new BigNumber(0));\r\n      setUserUSDCAllowance(new BigNumber(0));\r\n      setUserStagedBalance(new BigNumber(0));\r\n      setUserBondedBalance(new BigNumber(0));\r\n      setUserRewardedBalance(new BigNumber(0));\r\n      setUserClaimableBalance(new BigNumber(0));\r\n      setUserStatus(0);\r\n      setLegacyUserStagedBalance(new BigNumber(0));\r\n      setLegacyUserBondedBalance(new BigNumber(0));\r\n      setLegacyUserRewardedBalance(new BigNumber(0));\r\n      setLegacyUserClaimableBalance(new BigNumber(0));\r\n      setLegacyUserStatus(0);\r\n      return;\r\n    }\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      const poolAddressStr = await getPoolAddress();\r\n      const legacyPoolAddress = getLegacyPoolAddress(poolAddressStr);\r\n\r\n      const [\r\n        poolTotalBondedStr, pairBalanceBSDStr, pairBalanceUSDCStr, balance, usdcBalance,\r\n        allowance, usdcAllowance, stagedBalance, bondedBalance,\r\n        rewardedBalance, claimableBalance, status,\r\n        // legacyStagedBalance, legacyBondedBalance, legacyRewardedBalance, legacyClaimableBalance, legacyStatus\r\n      ] = await Promise.all([\r\n        getPoolTotalBonded(poolAddressStr),\r\n        getTokenBalance(BSD.addr, UNI.addr),\r\n        getTokenBalance(USDC.addr, UNI.addr),\r\n        getTokenBalance(UNI.addr, user),\r\n        getTokenBalance(USDC.addr, user),\r\n\r\n        getTokenAllowance(UNI.addr, user, poolAddressStr),\r\n        getTokenAllowance(USDC.addr, user, poolAddressStr),\r\n        getPoolBalanceOfStaged(poolAddressStr, user),\r\n        getPoolBalanceOfBonded(poolAddressStr, user),\r\n\r\n        getPoolBalanceOfRewarded(poolAddressStr, user),\r\n        getPoolBalanceOfClaimable(poolAddressStr, user),\r\n        getPoolStatusOf(poolAddressStr, user),\r\n\r\n        // getPoolBalanceOfStaged(legacyPoolAddress, user),\r\n        // getPoolBalanceOfBonded(legacyPoolAddress, user),\r\n        // getPoolBalanceOfRewarded(legacyPoolAddress, user),\r\n        // getPoolBalanceOfClaimable(legacyPoolAddress, user),\r\n        // getPoolStatusOf(legacyPoolAddress, user)\r\n      ]);\r\n\r\n      const poolTotalBonded = toTokenUnitsBN(poolTotalBondedStr, BSD.decimals);\r\n      const pairBSDBalance = toTokenUnitsBN(pairBalanceBSDStr, BSD.decimals);\r\n      const pairUSDCBalance = toTokenUnitsBN(pairBalanceUSDCStr, USDC.decimals);\r\n      const userUNIBalance = toTokenUnitsBN(balance, UNI.decimals);\r\n      const userUSDCBalance = toTokenUnitsBN(usdcBalance, USDC.decimals);\r\n      const userStagedBalance = toTokenUnitsBN(stagedBalance, UNI.decimals);\r\n      const userBondedBalance = toTokenUnitsBN(bondedBalance, UNI.decimals);\r\n      const userRewardedBalance = toTokenUnitsBN(rewardedBalance, BSD.decimals);\r\n      const userClaimableBalance = toTokenUnitsBN(claimableBalance, BSD.decimals);\r\n      const userStatus = parseInt(status, 10);\r\n      // const legacyUserStagedBalance = toTokenUnitsBN(legacyStagedBalance, UNI.decimals);\r\n      // const legacyUserBondedBalance = toTokenUnitsBN(legacyBondedBalance, UNI.decimals);\r\n      // const legacyUserRewardedBalance = toTokenUnitsBN(legacyRewardedBalance, UNI.decimals);\r\n      // const legacyUserClaimableBalance = toTokenUnitsBN(legacyClaimableBalance, BSD.decimals);\r\n      // const legacyUserStatus = parseInt(legacyStatus, 10);\r\n\r\n      if (!isCancelled) {\r\n        setPoolAddress(poolAddressStr);\r\n        setPoolTotalBonded(new BigNumber(poolTotalBonded));\r\n        setPairBalanceBSD(new BigNumber(pairBSDBalance));\r\n        setPairBalanceUSDC(new BigNumber(pairUSDCBalance));\r\n        setUserUNIBalance(new BigNumber(userUNIBalance));\r\n        setUserUNIAllowance(new BigNumber(allowance));\r\n        setUserUSDCAllowance(new BigNumber(usdcAllowance));\r\n        setUserUSDCBalance(new BigNumber(userUSDCBalance));\r\n        setUserStagedBalance(new BigNumber(userStagedBalance));\r\n        setUserBondedBalance(new BigNumber(userBondedBalance));\r\n        setUserRewardedBalance(new BigNumber(userRewardedBalance));\r\n        setUserClaimableBalance(new BigNumber(userClaimableBalance));\r\n        setUserStatus(userStatus);\r\n        setLegacyUserStagedBalance(new BigNumber(legacyUserStagedBalance));\r\n        setLegacyUserBondedBalance(new BigNumber(legacyUserBondedBalance));\r\n        setLegacyUserRewardedBalance(new BigNumber(legacyUserRewardedBalance));\r\n        setLegacyUserClaimableBalance(new BigNumber(legacyUserClaimableBalance));\r\n        setLegacyUserStatus(legacyUserStatus);\r\n        setLockup(poolAddressStr === DollarPool4 ? POOL_EXIT_LOCKUP_EPOCHS : 1);\r\n      }\r\n    }\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n  // Check for error in .call()\r\n  const isRewardedNegative = legacyUserRewardedBalance.isGreaterThan(new BigNumber(\"1000000000000000000\"));\r\n  const hasLegacyBalance = legacyUserStagedBalance.isGreaterThan(0) || legacyUserClaimableBalance.isGreaterThan(0) || legacyUserBondedBalance.isGreaterThan(0);\r\n  return (\r\n    <>\r\n      <div style={{ color: 'rgba(255, 255, 255, 0.8)' }}>\r\n        <IconHeader icon={<i className=\"fas fa-parachute-box\"/>} text=\"LP Reward Pool\"/>\r\n      </div>\r\n\r\n      {hasLegacyBalance ?\r\n        <>\r\n          <Header primary={\"Legacy Pool Migration\"}/>\r\n\r\n          <Migrate\r\n            legacyPoolAddress={getLegacyPoolAddress(poolAddress)}\r\n            isRewardNegative={isRewardedNegative}\r\n            staged={legacyUserStagedBalance}\r\n            claimable={legacyUserClaimableBalance}\r\n            bonded={legacyUserBondedBalance}\r\n            status={legacyUserStatus}\r\n          />\r\n        </>\r\n        : ''}\r\n\r\n      <PoolPageHeader\r\n        accountUNIBalance={userUNIBalance}\r\n        accountBondedBalance={userBondedBalance}\r\n        accountRewardedBSDBalance={userRewardedBalance}\r\n        accountClaimableBSDBalance={userClaimableBalance}\r\n        poolTotalBonded={poolTotalBonded}\r\n        accountPoolStatus={userStatus}\r\n      />\r\n\r\n      <WithdrawDeposit\r\n        poolAddress={poolAddress}\r\n        user={user}\r\n        balance={userUNIBalance}\r\n        allowance={userUNIAllowance}\r\n        stagedBalance={userStagedBalance}\r\n        status={userStatus}\r\n      />\r\n\r\n      <BondUnbond\r\n        poolAddress={poolAddress}\r\n        staged={userStagedBalance}\r\n        bonded={userBondedBalance}\r\n        lockup={lockup}\r\n      />\r\n\r\n      <Claim\r\n        poolAddress={poolAddress}\r\n        claimable={userClaimableBalance}\r\n        status={userStatus}\r\n      />\r\n\r\n      <Provide\r\n        poolAddress={poolAddress}\r\n        user={user}\r\n        rewarded={isRewardedNegative ? new BigNumber(0) : userRewardedBalance}\r\n        status={userStatus}\r\n        pairBalanceBSD={pairBalanceBSD}\r\n        pairBalanceUSDC={pairBalanceUSDC}\r\n        userUSDCBalance={userUSDCBalance}\r\n        userUSDCAllowance={userUSDCAllowance}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Pool;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport {\r\n  Header, Box, LinkBase, Tag,\r\n} from '@aragon/ui';\r\n\r\nfunction HomePageNoWeb3() {\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <>\r\n      <div style={{ padding: '1%', display: 'flex', alignItems: 'center' }}>\r\n        <MainButton\r\n          title=\"No web3 wallet detected\"\r\n          description=\"Click to get Metamask.\"\r\n          icon={<i className=\"fas fa-times-circle\"/>}\r\n          onClick={() => {\r\n            // @ts-ignore\r\n            window.location = 'https://www.metamask.io/';\r\n          }}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\ntype MainButtonPropx = {\r\n  title: string,\r\n  description: string,\r\n  icon: any,\r\n  onClick: Function,\r\n  tag?:string\r\n}\r\n\r\nfunction MainButton({\r\n  title, description, icon, onClick, tag,\r\n}:MainButtonPropx) {\r\n  return (\r\n    <LinkBase onClick={onClick} style={{ width: '100%' }}>\r\n      <Box>\r\n        <div style={{ padding: 10, fontSize: 18 }}>\r\n          {title}\r\n          {tag ? <Tag>{tag}</Tag> : <></>}\r\n        </div>\r\n        <span style={{ fontSize: 48 }}>\r\n          {icon}\r\n        </span>\r\n        {/*<img alt=\"icon\" style={{ padding: 10, height: 64 }} src={iconUrl} />*/}\r\n        <div style={{ paddingTop: 5, opacity: 0.5 }}>\r\n          {' '}\r\n          {description}\r\n          {' '}\r\n        </div>\r\n\r\n      </Box>\r\n    </LinkBase>\r\n  );\r\n}\r\n\r\nexport default HomePageNoWeb3;\r\n","import React, {useEffect, useState} from 'react';\r\n\r\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport { Main, Layout } from '@aragon/ui';\r\nimport { updateModalMode } from './utils/web3';\r\nimport { storePreference, getPreference } from './utils/storage';\r\nimport NavBar from './components/NavBar';\r\nimport HomePage from './components/HomePage';\r\nimport Trade from './components/Trade/index';\r\nimport Footer from './components/Footer';\r\nimport Wallet from \"./components/Wallet\";\r\nimport EpochDetail from \"./components/EpochDetail\";\r\nimport CouponMarket from \"./components/CouponMarket\";\r\nimport Governance from \"./components/Governance\";\r\nimport Candidate from \"./components/Candidate\";\r\nimport Regulation from \"./components/Regulation\";\r\nimport Pool from \"./components/Pool\";\r\nimport HomePageNoWeb3 from \"./components/HomePageNoWeb3\";\r\n\r\nfunction App() {\r\n  const storedTheme = getPreference('theme', 'light');\r\n\r\n  const [hasWeb3, setHasWeb3] = useState(false);\r\n  const [user, setUser] = useState(''); // the current connected user\r\n  const [theme, setTheme] = useState(storedTheme);\r\n\r\n  const updateTheme = (newTheme: string) => {\r\n    setTheme(newTheme);\r\n    updateModalMode(newTheme);\r\n    storePreference('theme', newTheme);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    async function updateUserInfo() {\r\n      if (!isCancelled) {\r\n        // @ts-ignore\r\n        setHasWeb3(typeof window.ethereum !== 'undefined');\r\n      }\r\n    }\r\n\r\n    updateUserInfo();\r\n    const id = setInterval(updateUserInfo, 15000);\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      isCancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [user]);\r\n\r\n  return (\r\n    <Router>\r\n      <Main assetsUrl={`${process.env.PUBLIC_URL}/aragon-ui/`} theme={theme} layout={false}>\r\n        <NavBar hasWeb3={hasWeb3} user={user} setUser={setUser} />\r\n        <Layout>\r\n        {\r\n          hasWeb3 ?\r\n            <Switch>\r\n              <Route path=\"/dao/:override\"><Wallet user={user}/></Route>\r\n              <Route path=\"/dao/\"><Wallet user={user}/></Route>\r\n              <Route path=\"/epoch/\"><EpochDetail user={user}/></Route>\r\n              <Route path=\"/coupons/:override\"><CouponMarket user={user}/></Route>\r\n              <Route path=\"/coupons/\"><CouponMarket user={user}/></Route>\r\n              <Route path=\"/governance/candidate/:candidate\"><Candidate user={user}/></Route>\r\n              <Route path=\"/governance/\"><Governance user={user}/></Route>\r\n              <Route path=\"/trade/\"><Trade user={user}/></Route>\r\n              <Route path=\"/regulation/\"><Regulation user={user}/></Route>\r\n              <Route path=\"/pool/:override\"><Pool user={user}/></Route>\r\n              <Route path=\"/pool/\"><Pool user={user}/></Route>\r\n              <Route path=\"/\"><HomePage user={user}/></Route>\r\n            </Switch>\r\n            :\r\n            <Switch>\r\n              <Route path=\"/\"><HomePageNoWeb3/></Route>\r\n            </Switch>\r\n        }\r\n        </Layout>\r\n        <div style={{height: '128px', width: '100%'}}/>\r\n        <Footer hasWeb3={hasWeb3} theme={theme} updateTheme={updateTheme}/>\r\n      </Main>\r\n    </Router>\r\n  );\r\n}\r\n\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'react-widgets/dist/css/react-widgets.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport Moment from 'moment'\r\nimport momentLocalizer from 'react-widgets-moment';\r\nimport './index.css';\r\nMoment.locale('en')\r\nmomentLocalizer()\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}